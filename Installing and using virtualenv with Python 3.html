<h2>Overview</h2>
<div class="solvvy-solution">
<p><a href="https://pypi.python.org/pypi/virtualenv">Virtualenv</a> is a tool used to create an isolated Python environment. This environment has its own installation directories that doesn't share libraries with other virtualenv environments (and optionally doesn't access the globally installed libraries either).</p>
<p>Virtualenv is the easiest and recommended way to configure a custom Python environment.</p>
<div class="alert alert-note">
<div class="alert-icon"><img src="https://kbimages.dreamhosters.com/images/dh-kb-note-icon.svg" alt="" width="60" height="60" /></div>
<div class="alert-content">
<p>To run the following commands, you must log into your server via SSH with your Shell user. View the following articles for more information:</p>
<ul>
<li><a href="/hc/en-us/articles/216041267-SSH-overview">SSH overview</a></li>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/216385837-Creating-a-user-with-Shell-SSH-access">Creating a user with Shell (SSH) access</a></li>
</ul>
</div>
</div>
</div>
<h2><span id="Installing_Virtualenv">Installing Virtualenv using pip3</span></h2>
<div class="solvvy-solution">
<p>Virtualenv is installed by default on all DreamHost servers for Python 2 versions. If you're working with Python 3, you should install virtualenv using pip3.</p>
<p>These instructions assume you've already installed a <a href="/hc/en-us/articles/115000702772-Installing-a-custom-version-of-Python-3">custom version of Python 3</a>. After it's installed and your&nbsp;shell is using this version, run pip3 to install virtualenv:</p>
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$ </span><span class="command">pip3 install virtualenv<br /></span><span class="cmdoutput">Collecting virtualenv
  Downloading virtualenv-15.1.0-py2.py3-none-any.whl (1.8MB)
    100% |████████████████████████████████| 1.8MB 367kB/s
Installing collected packages: virtualenv
Successfully installed virtualenv-15.1.0</span></pre>
</div>
<p>You'll need the full path to the Python 3 version of virtualenv, so run the following to view it:</p>
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$ </span><span class="command">which virtualenv</span>
<span class="cmdoutput">/home/username/opt/python-3.6.2/bin/virtualenv</span></pre>
</div>
</div>
<h2>Creating a virtual environment using a custom Python version</h2>
<div class="solvvy-solution">
<p>When working with virtual environments in Python, it's common to use a <a href="/hc/en-us/articles/115000702772-Installing-a-custom-version-of-Python-3">custom version of Python</a> rather than the server's version.&nbsp;To create a new virtual environment using your custom installed version of Python, follow these steps:</p>
<div class="alert alert-note">
<div class="alert-icon"><img src="https://kbimages.dreamhosters.com/images/dh-kb-note-icon.svg" alt="" width="60" height="60" /></div>
<div class="alert-content">
<p>The following steps use Python version 3.6.2. Make sure to use the version you installed.</p>
</div>
</div>
<ol>
<li>Make a note of the full file path to the custom version of Python you just installed. If you've followed the instructions in the <a href="https://help.dreamhost.com/hc/en-us/articles/115000702772-Installing-a-custom-version-of-Python-3">installation article</a>, the full path is:
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$ </span><span class="command">which python3</span>
<span class="cmdoutput">/home/username/opt/python-3.6.2/bin/python</span></pre>
</div>
</li>
<li>Navigate to your site's directory, where you'll create the new virtual environment:
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$ </span><span class="command">cd ~/example.com</span></pre>
</div>
</li>
<li>Source your .bash_profile
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$ </span><span class="command">. ~/.bash_profile</span></pre>
</div>
</li>
<li>Create the virtual environment while you specify the version of Python you wish to use. The following command creates a virtualenv named 'my_project' and uses the -p flag to specify the full path to the Python3 version you just installed:
<div class="alert alert-note">
<div class="alert-icon"><img src="https://kbimages.dreamhosters.com/images/dh-kb-note-icon.svg" alt="" width="60" height="60" /></div>
<div class="alert-content">You can name the virtualenv anything you like.</div>
</div>
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$ </span><span class="command">virtualenv -p /home/example_username/opt/python-3.6.2/bin/python3 my_project</span>
<span class="cmdoutput">
Running virtualenv with interpreter /home/example_username/opt/python-3.6.2/bin/python3<br />Using base prefix '/home/example_username/opt/python-3.6.2'<br />New python executable in /home/example_username/example.com/env/bin/python3<br />Also creating executable in /home/example_username/example.com/env/bin/python<br />Installing setuptools, pip, wheel...done.</span></pre>
</div>
<ul>
<li>This command creates a local copy of your environment specific to this website. While working on this website, you should activate the local environment in order to make sure you're working with the right versions of your tools and packages.</li>
</ul>
</li>
<li>To activate the new virtual environment, run the following:
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$ </span><span class="command">source my_project/bin/activate</span></pre>
</div>
<em>The name of the current virtual environment appears to the left of the prompt. For example:</em>
<div class="preboxcontainer">
<pre class="prebox"><span class="server">(my_project) [server]$ </span></pre>
</div>
</li>
<li>To verify the correct Python version, run the following:
<pre class="prebox"><span class="server">[server]$ </span><span class="command">python -V</span>
<span class="cmdoutput">Python 3.6.2</span></pre>
</li>
</ol>
<p>Any package that you install using pip is now placed in the virtual environments project folder, isolated from the global Python installation.</p>
</div>
<h2>Deactivating your virtualenv</h2>
<div class="solvvy-solution">
<p>When finished working in the virtual environment, you can deactivate it by running the following:</p>
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$ </span><span class="command">deactivate</span></pre>
</div>
<ul>
<li>This puts you back into your Shell user's&nbsp;default settings.</li>
</ul>
</div>
<h2>Deleting your virtual environment</h2>
<div class="solvvy-solution">
<p>To delete a virtual environment, simply delete the project folder. Using the previous example, run the following command:</p>
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$ </span><span class="command">rm -rf my_project</span></pre>
</div>
</div>
<h2><span id="Installing_custom_modules">Installing custom modules</span></h2>
<div class="solvvy-solution">
<p>View the following article for information on how to use pip to install Python modules.</p>
<ul>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/115000699011-Using-pip3-to-install-Python3-modules">Using pip to install Python 3 modules</a></li>
</ul>
</div>
<h2>Troubleshooting</h2>
<div class="solvvy-solution">
<h3>Errors creating a virtualenv</h3>
<p>You may see the following errors when attempting to create a virtualenv using Python 3.7.</p>
<p><strong>AttributeError: module 'importlib._bootstrap' has no attribute 'SourceFileLoader'</strong></p>
<p><strong>OSError: Command /home/username/venv/bin/python3 -c "import sys, pip; sys...d\"] + sys.argv[1:]))" setuptools pip failed with error code 1</strong></p>
<p>Adding the following line when <a href="https://help.dreamhost.com/hc/en-us/articles/360001435926-Installing-OpenSSL-locally-under-your-username" target="_self">installing a custom version of OpenSSL</a> to your .bash_profile resolves this.</p>
<div class="preboxcontainer">
<pre class="prebox">export LC_ALL="en_US.UTF-8"</pre>
</div>
</div>
<h2>See also</h2>
<div class="solvvy-hidden">
<ul>
<li><a href="/hc/en-us/articles/216137717-Python-overview">Python overview</a></li>
<li><a href="/hc/en-us/articles/216041267-SSH-overview">SSH overview</a></li>
<li><a href="/hc/en-us/articles/215317948-How-to-install-Django-using-virtualenv">How to install Django using virtualenv</a></li>
<li><a href="/hc/en-us/articles/216128557-Guidelines-for-setting-up-a-Python-file-at-DreamHost">Guidelines for setting up a Python file at DreamHost</a></li>
<li><a href="/hc/en-us/articles/215489188-How-to-install-a-newer-version-of-SWIG">How to install a newer version of SWIG</a></li>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/115000702772-Installing-a-custom-version-of-Python-3">Installing a custom version of Python 3</a></li>
<li><a href="/hc/en-us/articles/216137637-Pyenv-simple-Python-version-management">Pyenv: simple Python version management</a></li>
<li><a href="/hc/en-us/articles/215503458-Python-setuptools">Python setuptools</a></li>
</ul>
</div>
