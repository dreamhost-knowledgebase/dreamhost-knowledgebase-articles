<div class="alert alert-important">
<div class="alert-icon"><img src="https://objects-us-east-1.dream.io/kbimages/images/dh-kb-important-icon.svg" width="60" height="60" /></div>
<div class="alert-content">
<p>On Jan 19, 2019, pear.php.net released statement that their web server had been compromised and that a tainted go-pear.phar file was discovered. If you had previously downloaded the go-pear.phar file to install PEAR, you should check to confirm its authenticity using the following article:</p>
<ul>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/360022095512-Authenticating-your-go-pear-phar-file">Authenticating your go-pear.phar file</a></li>
</ul>
</div>
</div>
<p>When you use the <a href="/hc/en-us/articles/215507058-PHP-mail-overview">PHP mail function</a>, you are sending email directly from your web server. This can cause issues if the FROM address isn’t set properly or if your email isn’t hosted with DreamHost. Sending mail via SMTP is recommended as email is sent from the mail server rather than the web server. View the <a href="/hc/en-us/articles/215507068-Troubleshooting-PHP-mail-">PHP mail troubleshooting</a> article for details.</p>
<p>There are a few options to send PHP mail via SMTP. For example:</p>
<ul>
<li>Using <a href="https://help.dreamhost.com/hc/en-us/articles/215842658-PHPmailer-overview">PHPmailer</a></li>
<li>Using the PEAR Mail package.</li>
</ul>
<p>This article explains how to use the PEAR option.</p>
<h2>Configuring PEAR to send mail</h2>
<p>At this time, pear.php.net is down, so the normal install commands do not function.</p>
<p>To install packages, you must download them manually to your server. Visit the following article for instructions.</p>
<ul>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/214392988#installing-packages-while-pear.php.net-is-down">Installing packages while pear.php.net is down</a></li>
</ul>
<h2>Configuring PHP to send SMTP mail</h2>
<p>The following example can be used to send SMTP mail using the PEAR Mail package.</p>
<div class="alert alert-note">
<div class="alert-icon"><img src="https://objects-us-east-1.dream.io/kbimages/images/dh-kb-note-icon.svg" width="60" height="60" /></div>
<div class="alert-content">
<p>You only need to update the fields which are in bold.</p>
</div>
</div>
<h3>Finding your mail hostname</h3>
<p>Make sure to use your <a href="https://help.dreamhost.com/hc/en-us/articles/214918038#Server_names">mail server name</a> for the mail hostname. This would either be imap.dreamhost.com or pop.dreamhost.com, depending on the connection type you prefer. The example below uses the hostname of 'imap.dreamhost.com'.</p>
<div class="preboxcontainer">
<pre class="prebox">&lt;?php

error_reporting(E_ALL ^ E_NOTICE ^ E_DEPRECATED ^ E_STRICT);

set_include_path("." . PATH_SEPARATOR . ($UserDir = dirname($_SERVER['DOCUMENT_ROOT'])) . "/pear/php" . PATH_SEPARATOR . get_include_path());
require_once "Mail.php";

$host = "ssl://<span class="command"><strong>imap.dreamhost.com</strong></span>";
$username = "<span class="command"><strong>youremail@example.com</strong></span>";
$password = "<span class="command"><strong>your email password</strong></span>";
$port = "465";
$to = "<span class="command"><strong>address_form_will_send_TO@example.com</strong></span>";
$email_from = "<span class="command"><strong>youremail@example.com</strong></span>";
$email_subject = "<span class="command"><strong>Subject Line Here:</strong> </span>" ;
$email_body = "<span class="command"><strong>whatever you like</strong></span>" ;
$email_address = "<span class="command"><strong>reply-to@example.com</strong></span>";

$headers = array ('From' =&gt; $email_from, 'To' =&gt; $to, 'Subject' =&gt; $email_subject, 'Reply-To' =&gt; $email_address);
$smtp = Mail::factory('smtp', array ('host' =&gt; $host, 'port' =&gt; $port, 'auth' =&gt; true, 'username' =&gt; $username, 'password' =&gt; $password));
$mail = $smtp-&gt;send($to, $headers, $email_body);
<br />
if (PEAR::isError($mail)) {
echo("&lt;p&gt;" . $mail-&gt;getMessage() . "&lt;/p&gt;");
} else {
echo("&lt;p&gt;Message successfully sent!&lt;/p&gt;");
}
?&gt;
</pre>
</div>
<div class="alert alert-note">
<div class="alert-icon"><img src="https://objects-us-east-1.dream.io/kbimages/images/dh-kb-note-icon.svg" alt="" width="60" height="60" /></div>
<div class="alert-content">
<p>If you’re using Google to host your email, you must change the $host line to the following:</p>
<div class="preboxcontainer">
<pre class="prebox">$host = "ssl://smtp.gmail.com";</pre>
</div>
</div>
</div>
<h2>Allowing GMAIL to send from your mail application</h2>
<p>If you're using your GMAIL address to send via SMTP, you must first allow your application access to your GMAIL address. If you do not do this, your email will not authenticate and not send. View the following article for details:</p>
<ul>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/115001719551-Troubleshooting-GMAIL-SMTP-authentication-errors">Troubleshooting GMAIL SMTP authentication errors</a></li>
</ul>
<h2>See also</h2>
<ul>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/216041267-SSH-overview">SSH overview</a></li>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/215842658-PHPmailer-overview">PHPmailer overview</a></li>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/215507058-PHP-mail-overview">PHP mail() overview</a></li>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/215507068-Troubleshooting-PHP-mail-">Troubleshooting PHP mail()</a></li>
</ul>
