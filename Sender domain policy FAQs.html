<h2><span id="What_is_the_sender_domain_policy.3F">What is the sender domain policy?</span></h2>
<div class="solvvy-solution">
<p>DreamHost’s sender domain policy exists to ensure email that is sent from your website is legitimate. This policy requires two things:</p>
<ul>
<li>You must use a FROM address that’s on the same website you’re sending email from</li>
<li>The email must be hosted at DreamHost.</li>
</ul>
<div class="notebox-important">
<p>This policy applies to all DreamHost-hosted emails, including those being sent directly from the web server, most often through a PHP contact form. If you use SMTP authentication with an external mail provider, this policy DOES NOT apply to you. You can use SMTP authentication in a few ways:</p>
<ul>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/216140597-How-do-I-send-PHP-mail-via-SMTP-">Coding it directly into your form</a></li>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/215526937-Configuring-the-WP-Mail-SMTP-plugin" target="_self">Using a plugin that uses SMTP authentication</a></li>
</ul>
</div>
</div>
<h2>An example of what is not allowed</h2>
<div class="solvvy-solution">
<p>If your website is <strong>example.com</strong> and you have a PHP mail form sending email, the FROM address in that email must be something like <span class="text-object">contact@example.com</span>. Emails that are sent from the web server using a FROM address from somewhere else (such as Yahoo or Google) will be blocked and never sent.</p>
<div class="notebox-note">
<p>Emails sent through DreamHost's shared web servers must use a FROM address that is fully hosted at DreamHost. Forward only aliases will not work.</p>
</div>
</div>
<h2>What happens if your email is blocked?</h2>
<div class="solvvy-solution">
<p>If this happens, you can see the mail failure in your <a href="https://help.dreamhost.com/hc/en-us/articles/115000675027-FTP-overview-and-credentials">FTP</a> account.</p>
<ol>
<li>Log into your server via FTP.</li>
<li>Make sure you're in <a href="https://help.dreamhost.com/hc/en-us/articles/360001219231-Where-is-the-home-directory-#the-users-home-directory" target="_self">your user's directory</a>.</li>
<li>In the right pane, look for the <span class="text-object">/Maildir</span> folder. Click into it.
<dl>
<dd><img class="img-border" src="https://kbimages.dreamhosters.com/images/Sender_domain_policy_01.png" alt="" /></dd>
</dl>
</li>
<li>In this directory are three folders.
<ul>
<li><span class="text-object">cur</span></li>
<li><span class="text-object">new</span></li>
<li><span class="text-object">tmp</span></li>
</ul>
</li>
<li>Click into the /new folder.
<dl>
<dd><img class="img-border" src="https://kbimages.dreamhosters.com/images/Sender_domain_policy_02.png" alt="" /></dd>
</dl>
</li>
<li>In this folder you'll see files with long names. Right click and open in a text editor to view a file's contents.</li>
</ol>
<p>Open the file in that directory to view why it failed to send. When emails are blocked by this policy, you’ll see the following error message:</p>
<div class="preboxcontainer">
<pre class="prebox">5.7.1 Sender domain not allowed
</pre>
</div>
</div>
<h2>Creating a script to view rejected email</h2>
<div class="solvvy-solution">
<p>Instead of manually checking the folder on your server, you could create a script that automatically emails you whenever an email is rejected. View the following article for further details:</p>
<ul>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/360000484412-Create-a-script-to-send-you-rejected-emails">Create a script to send you rejected emails</a></li>
</ul>
</div>
<h2><span id="When_was_this_policy_put_into_place.3F">When was this policy put into place?</span></h2>
<div class="solvvy-solution">
<p>The policy which restricts the FROM address on emails was created in April of 2012. It was then slowly rolled out over the following months.</p>
</div>
<h2><span id="Why_did_DreamHost_create_this_policy.3F">Why did DreamHost create this policy?</span></h2>
<div class="solvvy-solution">
<p>Over time, spoofed emails sent from DreamHost’s servers began to negatively affect the reputation of DreamHost's mail servers. This in turn threatened the ability to host mail at all with DreamHost. To protect the reputation of DreamHost’s mail servers and provide a stable and reliable service to customers, this policy was created.</p>
</div>
<h2><span id="How_does_this_policy_work.3F">How does this policy work?</span></h2>
<div class="solvvy-solution">
<p>The most accurate way to send email is to send them from the server where the domain's mail service is hosted. For example, email from Hotmail should be sent from Hotmail's servers and email from Google should be sent from Gmail's servers. DreamHost's mail policy states that emails sent through DreamHost's mail and shared web servers should only be FROM domains that have their mail service hosted at DreamHost. So, when you send email from a DreamHost shared web server, you must do the following:</p>
<ul>
<li>The FROM address must be an email on your domain</li>
<li>Your email must be hosted at DreamHost</li>
</ul>
<div class="notebox-note">
<p>This policy does not apply to DreamHost's <a href="/hc/en-us/articles/215280058-Private-server-overview">VPS</a> and <a href="/hc/en-us/articles/215279658-Dedicated-server-overview">Dedicated</a> Servers. Emails sent from a VPS or Dedicated Server using PHP's mail(), Sendmail, or SMTP via localhost, are sent directly through the server's postfix mail system and go out to the recipient without passing through any other DreamHost server.</p>
</div>
</div>
<h2><span id="What_domains_am_I_not_allowed_to_send_from.3F">What domains am I not allowed to send from?</span></h2>
<div class="solvvy-solution">
<p>The list of blocked domains does not include every single domain that does not use DreamHost mail service. Instead, it’s a dynamic list maintained by DreamHost's mail administrators. While you may occasionally be able to send an email using a FROM address with a domain that is not hosted at DreamHost, there is no guarantee it won't be blocked in the future. To ensure your emails will not be blocked, only use a FROM address on a domain that uses DreamHost-hosted mail service.</p>
<p>The other option is to use SMTP authentication in any website form. When you use SMTP authentication, you can then use any FROM address you like, though SMTP authentication <em>must&nbsp;</em>occur&nbsp;on the system that handles mail for the domain.</p>
<p>View the <a href="/hc/en-us/articles/216140597-How-do-I-send-PHP-mail-via-SMTP-">Sending SMTP mail</a> article for an example.</p>
</div>
<h2><span id="Where_do_blocked_emails_go.3F_How_do_I_find_out_if_emails_have_been_blocked_from_sending.3F">Where do blocked emails go? How do I find out if emails have been blocked from sending?</span></h2>
<div class="solvvy-solution">
<p>Blocked emails are returned to the sender as an 'undelivered' bounced email. Inside that bounced email are three things:</p>
<ul>
<li>A notification that the mail server could not deliver the email</li>
<li>The error message the mail server provided as an explanation for it not being delivered</li>
<li>A copy of the original email that could not be sent</li>
</ul>
<p>Those bounced emails may be delivered to your regular mailbox, or they may be stored in the <span class="text-object">Maildir/new</span> folder on the web server. DreamHost support can also check the server mail logs for any errors that may have been recorded. When you <a class="panel-link" href="https://panel.dreamhost.com/index.cgi?tree=support.msg&amp;" target="_blank" rel="noopener noreferrer">contact support</a>, provide as many details as possible about the email you want them to research.</p>
<p>The following list includes the minimum amount of details you should provide:</p>
<ul>
<li>Date and time it was sent (including timezone)</li>
<li>Email addresses it was sent TO</li>
<li>Email address it was sent FROM</li>
<li>The website URL for the web form that may not be working properly</li>
</ul>
<div class="notebox-note">
<p>If you find that your website form isn’t delivering email as it should, look in <a href="https://help.dreamhost.com/hc/en-us/articles/360001219231-Where-is-the-home-directory-#the-users-home-directory" target="_self">your user’s directory</a> on your webserver. Log in via FTP, and then navigate to the <span class="text-object">Maildir/new</span> folder. This folder will list any emails that failed to send properly.</p>
</div>
<h3><span id="The_Maildir_folder">The Maildir folder</span></h3>
<p>Blocked emails will be filtered into your <span class="text-object">Maildir/new</span> directory. A Maildir is a directory (often named <span class="text-object">Maildir</span>) with three subdirectories named <span class="text-object">tmp</span>, <span class="text-object">new</span>, and <span class="text-object">cur</span>. Maildir is a widely-used format for storing email that does not require application-level file locking to maintain message integrity as messages are added, moved and deleted. Each message is kept in a separate file with a unique name.</p>
</div>
<h2><span id="Example_of_acceptable_FROM_addresses">Example of acceptable FROM addresses</span></h2>
<div class="solvvy-solution">
<table class="wikitable">
<tbody>
<tr>
<th bgcolor="#F2F2F2">How the email is sent</th>
<th bgcolor="#F2F2F2">FROM address used</th>
<th bgcolor="#F2F2F2">Explanation of address</th>
</tr>
<tr>
<td style="width: 29%;">
<dl>
<dd>SMTP through a mail client</dd>
</dl>
</td>
<td style="width: 29%;">
<dl>
<dd><span class="text-object">username@example.com</span></dd>
</dl>
</td>
<td>
<dl>
<dd>Uses your normal email address while sending email via SMTP</dd>
</dl>
</td>
</tr>
<tr>
<td>
<dl>
<dd>Through a webform on a website named <strong>example.com</strong></dd>
</dl>
</td>
<td>
<dl>
<dd><span class="text-object">username@server.dreamhost.com</span></dd>
</dl>
</td>
<td>
<ul>
<li>Uses your web server as the hostname.</li>
<li>This works, but may look strange.</li>
<li>An example would be <span class="text-object">contact@horsetail.dreamhost.com</span>.</li>
</ul>
</td>
</tr>
<tr>
<td>
<dl>
<dd>Through a webform on a website named <strong>example.com</strong></dd>
</dl>
</td>
<td>
<dl>
<dd><span class="text-object">username@example.com</span></dd>
</dl>
</td>
<td>
<ul>
<li>This works since the email is on the same domain sending the email.</li>
<li>However, the email MUST be hosted at DreamHost.</li>
</ul>
</td>
</tr>
<tr>
<td>
<dl>
<dd>Through a webform on a website named <strong>example.com</strong> using SMTP authentication.</dd>
</dl>
</td>
<td>
<dl>
<dd>Any address you like</dd>
</dl>
</td>
<td>
<ul>
<li>When SMTP authentication is used, the mail is not sent from the webserver. It's sent directly through the SMTP mail server you specify.</li>
<li>You can provide SMTP credentials for any email address you wish to send FROM.</li>
<li>This is the recommended way to send email in a webform.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<h2><span id="Examples_of_blocked_FROM_email_addresses">Examples of blocked FROM email addresses</span></h2>
<div class="solvvy-solution">
<p>Emails should not be sent with a FROM address hosted somewhere else. For example:</p>
<ul>
<li>user@hotmail.com</li>
<li>user@comcast.net</li>
<li>user@gmail.com</li>
</ul>
<p>If you need to use any address not hosted with DreamHost as your FROM address, you must use SMTP authentication.</p>
</div>
<h2><span id="Example_of_a_complete_email">Example of a complete email</span></h2>
<div class="solvvy-solution">
<p>This is an example of an email sent by a website's contact form, such as when a site visitor fills out a submission form on your website. This example uses the domain <strong>example.com</strong> which is hosted at DreamHost:</p>
<div class="preboxcontainer">
<pre class="prebox">From: Site Visitor &lt;admin@example.com&gt;
Reply-To: Site Visitor &lt;SiteVisitor@gmail.com&gt;
To: Joe Website Owner &lt;joe@example.com&gt;
Subject: Contact Form Submission
Date: 15 January 2015 10:47pm

Site Visitor &lt;SiteVisitor@gmail.com&gt; filled out the contact
form on your website at 10:47pm on 15 January 2015.

Their message was:

Hello. I’m interested in your services. Please call me at 555-555-5555.
</pre>
</div>
<ul>
<li>The 'From' header displays the email address hosted at DreamHost.</li>
<li>The ‘From’ header displays the name of the site visitor. This is useful because when Joe checks his email, he can easily see the name of the site visitor.</li>
<li>The Site Visitor's information is included in the email body.</li>
<li>The Site Visitor’s information is also in the Reply-To header. This is useful because when Joe clicks 'reply', the email is automatically addressed to be sent to the Site Visitor's email address.</li>
</ul>
</div>
<h2>See also</h2>
<div class="solvvy-hidden">
<ul>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/215036058-Sender-domain-policy-and-spoofing-overview">Sender domain policy and spoofing overview</a></li>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/215035988-How-to-spoof-in-your-CMS-or-web-application">How to spoof in your CMS or web application</a></li>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/215730427-What-is-useful-spoofing-">What is useful spoofing?</a></li>
</ul>
</div>
