<h2>Overview</h2>
<div class="solvvy-solution">
<p>This article lists a few steps you can take to troubleshoot your Node.js installation.</p>
<div class="alert-warning">
<p>The version of Passenger running on DreamHost servers does not currently function with Node.js versions 14+.</p>
</div>
<h2>Passenger is not using your custom version of Node.js</h2>
<p>If you find the custom version you installed is not being used, add the following code to an <span class="text-object">.htaccess</span> file in your application directory:</p>
<div class="preboxcontainer">
<pre class="prebox">PassengerNodejs /home/<span class="code-highlight">username</span>/.nvm/versions/node/v12.16.3/bin/node</pre>
</div>
<div class="notebox-note">
<p>Make sure to change the username to your <a href="https://help.dreamhost.com/hc/en-us/articles/216385837-Creating-a-user-with-Shell-SSH-access" target="_self">Shell user</a>, and version to the version you have installed.</p>
</div>
<p>Next, reload Passenger by running the following command in the app's directory:</p>
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$ </span><span class="command">mkdir -p tmp &amp;&amp; touch tmp/restart.txt</span></pre>
</div>
<p>In the future, you just need to <span class="code">touch</span> the <span class="text-object">restart.txt</span> file to restart the application.</p>
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$ </span><span class="command">touch tmp/restart.txt</span></pre>
</div>
<p>View the following page for further details:</p>
<ul>
<li><a href="https://www.phusionpassenger.com/library/config/apache/reference/">https://www.phusionpassenger.com/library/config/apache/reference/</a></li>
</ul>
</div>
<h2>Passenger is not loading the app.js file</h2>
<div class="solvvy-solution">
<p>If you've followed the instructions in the <a href="https://help.dreamhost.com/hc/en-us/articles/216635318-Enabling-Passenger-for-Node-js" target="_self">Enabling Passenger for Node.js</a> article, you have added an <span class="text-object">app.js</span> file and <span class="text-object">.htaccess</span> file in your application directory. Make sure your <span class="text-object">.htaccess</span> file does NOT contain the following line.</p>
<div class="preboxcontainer">
<pre class="prebox">PassengerAppType node</pre>
</div>
<p>This will cause Passenger to not load your <span class="text-object">app.js</span> file.</p>
</div>
<h2>Changes to my app are not updating</h2>
<div class="solvvy-solution">
<p>If you're using Passenger, changes to your app will immediately update. If you find the changes have not updated, you can try the following two options.</p>
<h3>touch the restart.txt file</h3>
<p>Run the <span class="code">touch tmp/restart.txt</span> command as mentioned in the section above.</p>
<div class="notebox-important">
<p>If you find this did not work, <a href="https://help.dreamhost.com/hc/en-us/sections/203272258-Contacting-Support" target="_self">Contact support</a> for further assistance.</p>
</div>
</div>
<h3>Re-save your domain settings in the panel</h3>
<p>If your domain is hosted on a&nbsp;VPS or dedicated server, you could also reload HTTP in the panel.</p>
<ol>
<li>Navigate to the&nbsp;<a class="panel-link" href="https://panel.dreamhost.com/index.cgi?tree=vps.dashboard" target="_blank" rel="noopener noreferrer">VPS</a>&nbsp;or&nbsp;<a class="panel-link" href="https://panel.dreamhost.com/index.cgi?tree=dedicated.dashboard&amp;" target="_blank" rel="noopener noreferrer">Dedicated</a>&nbsp;page.</li>
<li>Click the&nbsp;<strong>Reload HTTP</strong>&nbsp;button.</li>
<li>Wait 5 minutes for it to rebuild the configuration file.</li>
</ol>
<h2>Error logging in Node.js</h2>
<div class="solvvy-solution">
<p>You can specify custom output and error log locations when launching your Node.js app using the command below. Make sure to change the app name to your app before running the command.</p>
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$ </span><span class="command">node <span class="code-highlight">example.js</span> &gt; <span class="code-highlight">node_log.log</span> 2&gt; <span class="code-highlight">node_error.log</span></span></pre>
</div>
</div>
