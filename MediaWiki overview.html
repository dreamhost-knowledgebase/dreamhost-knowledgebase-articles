<div class="document">
<div class="documentwrapper">
<div class="body">
<div id="mediawiki">
<div class="table-of-content container">
<ul class="simple">
<li><a class="reference internal" href="#install">Installing MediaWiki</a></li>
<li><a class="reference internal" href="#add-ons">Common add-ons to MediaWiki</a></li>
<li><a class="reference internal" href="#images">Handling images</a></li>
<li><a class="reference internal" href="#email_spam">Email and spam</a></li>
<li><a class="reference internal" href="#utilities">MediaWiki utilities</a></li>
<li><a class="reference internal" href="#secure">Secure settings</a></li>
<li><a class="reference internal" href="#license">Licensing settings</a></li>
<li><a class="reference internal" href="#advanced_trouble">Advanced settings and troubleshooting</a></li>
<li><a class="reference internal" href="#see">See also</a></li>
</ul>
</div>
<dl>
<dd><img src="https://objects-us-west-1.dream.io/kbimages/images/Mediawiki.fw.png" alt="Mediawiki.fw.png" width="149" height="149" /></dd>
</dl>
<p>MediaWiki is free, open-source software you can use to create wiki content, such as <a href="https://www.wikipedia.org/">Wikipedia</a>. The application is ideal for creating knowledge base pages similar to an encyclopedia.</p>
<p>For more information, visit MediaWiki's official site:</p>
<ul>
<li><a href="https://www.MediaWiki.org/wiki/MediaWiki">MediaWiki.org</a>.</li>
</ul>
<p>MediaWiki is offered as a <a href="/hc/en-us/articles/215089938-What-One-Click-Installs-does-DreamHost-offer-">One-Click Install</a> in your DreamHost panel.</p>
<h2><span id="install">Installing MediaWiki</span></h2>
<p>The simplest way to install MediaWiki is to use the <a href="/hc/en-us/articles/215915837-How-do-I-install-a-One-Click-Install-">One-Click Install</a> feature in your panel which installs the software for you.</p>
<p>The other option is to install it manually which requires you to download the files yourself and upload them to your web server.</p>
<p>Detailed instructions on manually installing MediaWiki are provided in the following article:</p>
<ul>
<li><a href="https://www.MediaWiki.org/wiki/Manual:Installation_guide#Summarized_installation_guide">MediaWiki Manual Installation Guide</a></li>
</ul>
<div class="alert alert-note">
<div class="alert-icon"><img src="https://objects-us-west-1.dream.io/kbimages/images/dh-kb-note-icon.svg" alt="" width="60" height="60" /></div>
<div class="alert-content">
<p>Both installation methods install the same files and configurations. However, if you choose to install MediaWiki manually, you have the option to install the latest version of MediaWiki which DreamHost does not currently offer in the panel.</p>
</div>
</div>
<h2><span id="add-ons">Common add-ons to MediaWiki</span></h2>
<h3>Extensions</h3>
<p>MediaWiki offers many different types of extensions which you can use to add further functionality and customization to your site. See the following article for further details:</p>
<ul>
<li><a href="https://www.MediaWiki.org/wiki/Category:Extensions">MediaWiki Extensions</a></li>
</ul>
<h3>Google Analytics</h3>
<p>You can also add Google Analytics to your MediaWiki installation if you wish. See the following article for detailed instructions:</p>
<ul>
<li><a href="https://www.mediawiki.org/wiki/Extension:Google_Analytics_Integration">Google Analytics integration</a></li>
</ul>
<h2><span id="images">Handling images</span></h2>
<h3>Thumbnail problems</h3>
<p>MediaWiki can occasionally have problems generating image thumbnails, such as returning corrupted images or the error message "Error creating thumbnail". A common cause of this is not enough memory.</p>
<p>If you upload a large image and see "Error creating thumbnail" where a thumbnail should be, try adding the following to your LocalSettings.php file in your site’s primary directory:</p>
<div class="preboxcontainer">
<pre class="prebox">$wgMaxShellMemory = 524288;
</pre>
</div>
<h3>SVG images</h3>
<p>For best results in generating thumbnails of SVG images, you may wish to install <a href="https://en.wikipedia.org/wiki/Librsvg">librsvg</a>.</p>
<div class="alert alert-note">
<div class="alert-icon"><img src="https://objects-us-west-1.dream.io/kbimages/images/dh-kb-note-icon.svg" alt="" width="60" height="60" /></div>
<div class="alert-content">
<p>The SVG installation process is not supported and is recommended only for advanced users. See the following article for more information:</p>
<ul>
<li><a href="https://www.mediawiki.org/wiki/Manual:Image_administration#SVG">MediaWiki Manual:Image administration – SVG</a></li>
</ul>
</div>
</div>
<h2><span id="email_spam">Email and spam</span></h2>
<h3>Domain spoofing</h3>
<p>Add the following to your LocalSettings.php file:</p>
<div class="preboxcontainer">
<pre class="prebox">$wgUserEmailUseReplyTo = true;
</pre>
</div>
<p>This spoofs the domain so that the sending user's email is in a Reply-To header instead of the From header. Otherwise, the email that users try to send each other through Special:EmailUser on your wiki cannot be delivered.</p>
<h3>Notifications</h3>
<p>Given the <a href="/hc/en-us/articles/215730467-SMTP-quota-overview">SMTP quota</a>, you need to be careful if you enable <a href="https://www.mediawiki.org/wiki/Manual:$wgEnotifWatchlist">$wgEnotifWatchlist</a>.</p>
<p>If a page is 'watchlisted' by 100 users who have that user preference enabled, then a change to that page uses up your quota for an hour, if you are on shared hosting.</p>
<h3>Blocking MediaWiki spam</h3>
<dl>
<dt><a href="https://www.mediawiki.org/wiki/Manual:Combating_spam">Combating SPAM</a></dt>
</dl>
<dl>
<dd>Provides steps you can take to combat SPAM on your website.</dd>
</dl>
<dl>
<dt><a href="https://meta.wikimedia.org/wiki/Wiki_spam">MediaWiki Wiki Spam</a></dt>
</dl>
<dl>
<dd>Description of what wiki spam is, and instructions on how any user can help tackle the wiki-spam problem (not just administrators). Not all of which is obvious, so it's worthwhile for administrators to read through this too, as you might wish to refer your wiki users to this.</dd>
</dl>
<dl>
<dt><a href="https://www.mediawiki.org/wiki/CAPTCHA">CAPTCHA</a></dt>
</dl>
<dl>
<dd>Enabling a Captcha on any form helps to reduce spam.</dd>
</dl>
<dl>
<dt><a href="https://www.mediawiki.org/wiki/Manual:Preventing_access#Restrict_account_creation">Restrict account creation</a></dt>
</dl>
<dl>
<dd>By default, anyone can create an account on your wiki. However, you can restrict who has the ability to create accounts.</dd>
</dl>
<dl>
<dt><a href="https://www.mediawiki.org/wiki/Manual_talk:User_rights">User rights</a></dt>
</dl>
<dl>
<dd>You also have control over user rights. You can <a href="https://www.mediawiki.org/wiki/Manual:$wgGroupPermissions">disable non-user edits</a> with this feature.</dd>
</dl>
<h2><span id="utilities">MediaWiki utilities</span></h2>
<h3>Maintenance scripts</h3>
<p>In the MediaWiki root install, there is a subdirectory named <span class="code">/maintenance</span> which includes various scripts you can run on your MediaWiki installation. In order to run the PHP scripts, you must <a href="/hc/en-us/articles/216385837-Enabling-Shell-access">enable shell access</a> on your domain.</p>
<p>In order to run the scripts, you must enter ‘php’ before the filename. For example, run the following command if you wish to run the script eval.php in the maintenance directory:</p>
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$ </span><span class="command">php eval.php</span></pre>
</div>
<div class="alert alert-note">
<div class="alert-icon"><img src="https://objects-us-west-1.dream.io/kbimages/images/dh-kb-note-icon.svg" alt="" width="60" height="60" /></div>
<div class="alert-content">
<p>If you simply type ‘php’, it uses the default version on the server. However, you can explicitly choose any version by using the following instead:</p>
<ul>
<li>/usr/local/php55/bin/php</li>
<li>/usr/local/php56/bin/php</li>
<li>/usr/local/php70/bin/php</li>
</ul>
</div>
</div>
<p>To learn more about the individual scripts, see the following article:</p>
<ul>
<li><a href="https://www.MediaWiki.org/wiki/Manual:Maintenance_scripts">Maintenance scripts</a></li>
</ul>
<h3>Caching</h3>
<p>Caching your site can improve performance. There are several ways to cache your data using MediaWiki. See the following articles for further information:</p>
<ul>
<li><a href="https://www.mediawiki.org/wiki/Manual:Cache">MediaWiki Cache</a></li>
<li><a href="https://www.mediawiki.org/wiki/Manual:File_cache">File cache</a></li>
</ul>
<h3>Unicode normalization</h3>
<p>To use the intl PECL extension for Unicode normalization, follow this <a href="/hc/en-us/articles/214894037-How-do-I-create-a-phprc-file-via-FTP-">guide</a> on creating a phprc file. Once added, you can add the following line to it:</p>
<div class="preboxcontainer">
<pre class="prebox">extension = intl.so
</pre>
</div>
<h3>Enabling uploads</h3>
<p>See the following guide for instructions on how to enable file uploads:</p>
<ul>
<li><a href="https://www.mediawiki.org/wiki/Manual:Configuring_file_uploads">Configuring file uploads</a></li>
</ul>
<h3>Backing up</h3>
<p>See the following guide for instructions on how to back up your data:</p>
<ul>
<li><a href="https://www.mediawiki.org/wiki/Manual:Backing_up_a_wiki">Backing up MediaWiki</a></li>
</ul>
<p>Also, see following DreamHost article for further instructions:</p>
<ul>
<li><a href="/hc/en-us/articles/215089918-How-do-I-backup-my-entire-account-">Backup</a></li>
</ul>
<h2><span id="secure">Secure settings</span></h2>
<h3>Passwords and HTTPS</h3>
<p>The <a href="/hc/en-us/articles/215089938-What-One-Click-Installs-does-DreamHost-offer-">One-Click Install</a> uses a form on an HTTP web page to take your password. This means that your password transmits over the network in clear text. To use HTTPS, you must enable <a href="/hc/en-us/articles/216041537-Secure-Hosting-overview">Secure Hosting</a>. Once an SSL certificate is added to your domain, you can force HTTPS in any request by adding code to a configuration file. See the following articles for further details depending on if your site is running on an Apache or Nginx server:</p>
<ul>
<li><a href="/hc/en-us/articles/215747758-Force-your-site-to-load-securely-with-an-htaccess-file">Forcing HTTPS with an .htaccess file on an Apache server</a></li>
<li><a href="/hc/en-us/articles/216456087-Creating-redirects-with-Nginx">Force your Nginx website to load securely</a></li>
</ul>
<h3>LocalSettings.php permissions</h3>
<p>The LocalSettings.php file stores your database login information in it, including the database username and password. After you move the LocalSettings.php file to your root directory, you can review its permissions.</p>
<p>You should update the permissions on that file to 640 or 600. This can be done by running the following command:</p>
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$ </span><span class="command">chmod 640 LocalSettings.php</span>
</pre>
</div>
<p>This makes the file only writeable for the owner while the group can still read it. However, the most secure option is to mark the file as only readable/writable by the owner:</p>
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$ </span><span class="command">chmod 600 LocalSettings.php</span>
</pre>
</div>
<p>This way, your MySQL password on this file is safe from viewing from other users on the same server. See the following article for further details on permissions:</p>
<ul>
<li><a href="/hc/en-us/articles/214750848-UNIX-commands-Working-with-files">Unix File Permissions</a></li>
</ul>
<h3>Moving database credentials to another file</h3>
<p>Another good security practice is to set up a separate PHP file stored in your user's directory. This file stores your credentials and instead passes them as variables. The following setup describes how to link your LocalSettings.php file to this new file:</p>
<ol>
<li>In your user's directory (not the domain's directory), create a new directory called "external_includes".</li>
<li>In this new folder, create a file called "database_info.php".
<dl>
<dd>The full path to this new file is:</dd>
</dl>
<div class="preboxcontainer">
<pre class="prebox">/home/[yourusername]/external_includes/database_info.php</pre>
</div>
<dl>
<dd>The file includes the following (<a href="/hc/en-us/articles/221610868-Finding-your-database-login-credentials">fill in your true values within the quotes</a>):</dd>
</dl>
<div class="preboxcontainer">
<pre class="prebox">&lt;?php
 $database_server = "mysql.example.com"; 
 $database_name   = "databasename"; 
 $database_user   = "username";
 $database_pw     = "password";
 ?&gt;
</pre>
</div>
</li>
<li>Remove the current database credentials in your LocalSettings.php file.</li>
<li>Replace those lines with the following:
<div class="preboxcontainer">
<pre class="prebox"># enhanced DB security
 require_once ("/home/[yourusername]/external_includes/database_info.php");
 
 $wgDBserver     = $database_server;
 $wgDBname       = $database_name;
 $wgDBuser       = $database_user;
 $wgDBpassword   = $database_pw;
 
 # DB variables not security related - leave these alone from how when you set up your wiki
 $wgDBprefix     = "wiki_";
 $wgDBtype       = "mysql";
</pre>
</div>
</li>
</ol>
<p>With this setup, your credentials in the LocalSettings file are now safely hidden.</p>
<h2><span id="license">Licensing settings</span></h2>
<p>You can select which MediaWiki license you wish to use. See the following article for more details:</p>
<ul>
<li><a href="https://wiki.creativecommons.org/GFDL_versus_CC-by-sa">GFDL versus CC</a></li>
</ul>
<div class="alert alert-note">
<div class="alert-icon"><img src="https://objects-us-west-1.dream.io/kbimages/images/dh-kb-note-icon.svg" alt="" width="60" height="60" /></div>
<div class="alert-content">
<p>Wikipedia uses GFDL. If you wish to enable reusable content in Wikipedia and other GFDL projects, then you must use GFDL (or multi-license to use both). In general, if there are other projects you want to work with, you should use compatible licensing.</p>
</div>
</div>
<h2><span id="advanced_trouble">Advanced settings and troubleshooting</span></h2>
<h3>Enable debugging</h3>
<p>You can enable debugging by adding lines at the bottom of your <a href="https://www.mediawiki.org/wiki/Manual:LocalSettings.php">LocalSettings.php file</a>. By enabling this, you are provided detailed debugging information to help isolate the cause.</p>
<p>See the following article for further details:</p>
<ul>
<li><a href="https://www.mediawiki.org/wiki/Manual:How_to_debug">How to debug</a></li>
</ul>
<p>After you finish troubleshooting your install, you should disable your debugging settings.</p>
<h3>Short URLs</h3>
<p>You can shorten the URLs to appear more user friendly. For example, you can change the following URL example:</p>
<dl>
<dd><strong>example.com/w/index.php?title=Main_Page</strong>
<p>to</p>
<strong>example.com/wiki/Main_Page</strong></dd>
</dl>
<p>See the following articles for further instructions:</p>
<ul>
<li><a href="https://www.mediawiki.org/wiki/Manual:Short_URL">Short URLs</a></li>
<li><a href="https://shorturls.redwerks.org/">MediaWiki ShortURL Builder</a></li>
</ul>
<h3>Fixing MediaWiki after adding an SSL certificate to a domain</h3>
<p>You may notice that MediaWiki loads incorrectly or shows 'unsecure content' warnings in the browser bar after you add an <a href="/hc/en-us/articles/215089118-Adding-an-SSL-certificate-overview">SSL certificate</a> to the domain where MediaWiki is installed.</p>
<p>Your LocalSettings.php file must be edited to reflect HTTPS for your domain. To fix, find the <span class="code">$wgServer</span> value in the LocalSettings.php file and make sure the domain shows HTTPS (and not HTTP) for the URL value:</p>
<div class="preboxcontainer">
<pre class="prebox">## The protocol and server name to use in fully-qualified URLs
$wgServer = "<strong>https</strong>://www.example.com";</pre>
</div>
<p>After you make this edit, save it, and then transfer the LocalSettings.php file to the root wiki folder on your server. Refresh your browser and MediaWiki should load normally.</p>
<h2><span id="see">See also</span></h2>
<h3>Internal links</h3>
<ul>
<li><a href="/hc/en-us/articles/215915837-How-do-I-install-a-One-Click-Install-">How do I install a One-Click Install?</a></li>
<li><a href="/hc/en-us/articles/215089938-What-One-Click-Installs-does-DreamHost-offer-">What One-Click Installs does DreamHost offer?</a></li>
<li><a href="/hc/en-us/articles/217292807-Upgrading-MediaWiki">Upgrading MediaWiki</a></li>
<li><a href="/hc/en-us/articles/215916107-How-do-I-remove-a-One-Click-Install-">How do I remove a One-Click Install?</a></li>
</ul>
<h3>External links</h3>
<ul>
<li><a href="https://www.mediawiki.org/wiki/MediaWiki">MediaWiki's official website</a></li>
<li><a href="https://meta.wikimedia.org/wiki/Help:Editing">MetaWikipedia Help:Editing</a> – MediaWiki markup reference</li>
<li><a href="https://www.MediaWiki.org/wiki/Category:Extensions">MediaWiki Extensions</a></li>
<li><a href="https://www.MediaWiki.org/wiki/Manual:Maintenance_scripts">Maintenance scripts</a></li>
<li><a href="https://www.mediawiki.org/wiki/Manual:Combating_spam">Combating SPAM</a></li>
<li><a href="https://www.mediawiki.org/wiki/Manual:Cache">MediaWiki Cache</a></li>
<li><a href="https://www.mediawiki.org/wiki/Manual:LocalSettings.php">LocalSettings.php file</a></li>
<li><a href="https://www.mediawiki.org/wiki/Manual:How_to_debug">How to debug</a></li>
</ul>
</div>
</div>
</div>
</div>
<div class="clearer"> </div>
