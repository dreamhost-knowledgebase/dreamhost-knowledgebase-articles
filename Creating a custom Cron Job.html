<h2>Overview</h2><div class="solvvy-solution">
<p>This article shows how to manually create a custom cron job using your <a href="https://help.dreamhost.com/hc/en-us/articles/216385837-Enabling-Shell-access">Shell user</a>. It involves logging into the server via <a href="https://help.dreamhost.com/hc/en-us/articles/216041267-SSH-overview">SSH</a> to run several commands.</p>
<p>These instructions can also be used to edit an existing cron job you created in the panel, however for simplicity, it's recommended that if you created it in the panel, you continue to edit it from the panel.</p>
</div><h2>Basic details</h2><div class="solvvy-solution">
<p>The crontab files are where the lists of jobs and other instructions to the cron daemon are kept. Each user at DreamHost has their own individual crontab file that can be access by running the following command under your <a href="https://help.dreamhost.com/hc/en-us/articles/216385837-Enabling-Shell-access">Shell user</a>:</p>
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$ </span><span class="command">crontab -e</span>
</pre>
</div>
<p>Crontab files are simple text files that have a particular format. Each line of a crontab file follows a particular format as a series of fields, separated by spaces and/or tabs. Each field can have a single value or a series of values. A single cron job should take up exactly one line, but this can be a long line (more than 80 characters).</p>
<h3>Things to look out for when editing/creating your crontab</h3>
<p>Each line has five time/date fields, followed by a command, followed by a newline character ('\n'). A common problem is not including a newline, so hit 'Enter/Return' a time or three at the end of your command.</p>
<p>Another common problem is automatic word-wrap breaking up a long line into multiple lines, so make sure your text editor doesn't do this.</p>
<p>Blank lines and leading spaces and tabs are ignored. Lines whose first non-space character is a hash-sign (#) are ignored as they are considered comments. Note that comments are not allowed on the same line as cron commands, since they are interpreted as being part of the command. Similarly, comments are not allowed on the same line as environment variable settings (like MAILTO).</p>
</div><h2>What if I already created a cron job in the panel under my Shell user?</h2><div class="solvvy-solution">
<p>There are two ways to create custom cron jobs.</p>
<ul>
<li>Editing the existing crontab on the server</li>
<li>Using a custom crontab file</li>
</ul>
<h3>If you've edited the existing crontab</h3>
<p>If you have already created a cron job in your panel, you can view it by running <span class="code">crontab -e</span> under your Shell user. If you edit the file to add another cron job below the existing panel one, the panel cron job will continue to function normally in addition to your new edited code.</p>
<p>Any adjustments in the panel will not affect your custom code.</p>
<h3>If you switched the server's crontab with your custom crontab</h3>
<p>You can also use a custom crontab that you created. If you do this, the server's crontab is overwritten. You can replace the server's crontab by running the following:</p>
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$</span><span class="command"> crontab /home/username/mycrontab</span></pre>
</div>
<p>However, if you then add or edit a cron job in the panel, your custom crontab will be overwritten. So you need to either use the server's crontab, or your custom crontab.</p>
</div><h2>Manually creating a custom cron job</h2><div class="solvvy-solution">
<p>The instructions below explain how to add a custom cron job under your Shell user. These instructions assume you have NOT added a cron job in the panel yet, so the crontab file is blank.</p>
<ol>
<ol>
<li>Log into your server via <a href="https://help.dreamhost.com/hc/en-us/articles/216041267-SSH-overview">SSH</a> using the Shell user you wish to create the cron job under.</li>
<li>Once logged in, run the following command to open your crontab file.
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$ </span><span class="command">crontab -e</span>
no crontab for example_username - using an empty one

Select an editor.  To change later, run 'select-editor'.
  1. /bin/ed
  2. /bin/elvis-tiny
  3. /bin/nano        &lt;---- easiest
  4. /usr/bin/emacs24
  5. /usr/bin/jed
  6. /usr/bin/jmacs
  7. /usr/bin/joe
  8. /usr/bin/jpico
  9. /usr/bin/jstar
  10. /usr/bin/mcedit
  11. /usr/bin/rjoe
  12. /usr/bin/vim.basic
  13. /usr/bin/vim.tiny

Choose 1-13 [3]: <span class="command">3</span>
</pre>
</div>
</li>
<li>You are then asked to choose an editor to view this file. #3 uses the program 'nano' which is the easiest option. View the '<a href="https://help.dreamhost.com/hc/en-us/articles/115006413028-Creating-and-editing-a-file-via-SSH">Creating and editing a file via SSH</a>' article for instructions on how to use nano. </li>
<li>You are presented with this new crontab file:
<div class="preboxcontainer">
<pre class="prebox"># Edit this file to introduce tasks to be run by cron.
#
# Each task to run has to be defined through a single line
# indicating with different fields when the task will be run
# and what command to run for the task
#
# To define the time you can provide concrete values for
# minute (m), hour (h), day of month (dom), month (mon),
# and day of week (dow) or use '*' in these fields (for 'any').#
# Notice that tasks will be started based on the cron's system
# daemon's notion of time and timezones.
#
# Output of the crontab jobs (including errors) is sent through
# email to the user the crontab file belongs to (unless redirected).
#
# For example, you can run a backup of all your user accounts
# at 5 a.m every week with:
# 0 5 * * 1 tar -zcf /var/backups/home.tgz /home/
#
# For more information see the manual pages of crontab(5) and cron(8)
#
# m h  dom mon dow   command</pre>
</div>
</li>
<li>At the bottom, add the code for your cron job. This example runs a file named mail.php under the username of 'example_username'. This should be the same username you're currently logged in under. This example runs the cron job at 8:13 pm.
<div class="preboxcontainer">
<pre class="prebox"># Custom cron job
MAILTO="user@example.com"
13 20 * * * php  /home/example_username/mail.php</pre>
</div>
<div class="alert alert-note">
<div class="alert-icon"><img height="60" src="https://objects-us-east-1.dream.io/kbimages/images/dh-kb-note-icon.svg" width="60"/></div>
<div class="alert-content">
<p>There are two parts to the command. The first part must specify the path to the program you'd like to use to run the cron job. For example let's say you have a PHP file named script.php in your domains directory:</p>
<ul>
<li>/home/username/example.com/script.php</li>
</ul>
<p>To run this command you'd enter the path to your chosen version of PHP followed by a space, followed by the path to the file:</p>
<ul>
<li>/usr/local/php71/bin/php /home/username/example.com/script.php</li>
</ul>
<p>You could also use the default version by using 'php' instead of the full path.</p>
</div>
</div>
</li>
<li>Save the file. You should see the following response:
<div class="preboxcontainer">
<pre class="prebox">crontab: installing new crontab</pre>
</div>
</li>
</ol>
</ol>
<p>That's it. The cron job should now run every day at 8:13pm.</p>
</div><h2><span id="Manually_editing_crontab">Crontab commands</span></h2><div class="solvvy-solution">
<div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en">
<div class="alert alert-important">
<div class="alert-icon"><img alt="" height="60" src="https://objects-us-east-1.dream.io/kbimages/images/dh-kb-important-icon.svg" width="60"/></div>
<div class="alert-content">
<p>Please note that if you choose to replace the server's crontab, all cron jobs created in the panel for this specific username will no longer function since they would have been overwritten on the server.</p>
<p>Additionally, if you update any cron jobs under this user in the panel, it will overwrite your custom crontab. The crontab will be replaced in its original form as created in the panel.</p>
</div>
</div>
<h3>Replace your existing crontab with your custom crontab file</h3>
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$ </span><span class="command">crontab /home/username/filename</span>
</pre>
</div>
<h3>Edit your server's crontab</h3>
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$ </span><span class="command">crontab -e</span>
</pre>
</div>
<h3>View your crontab</h3>
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$ </span><span class="command">crontab -l</span>
</pre>
</div>
<h3>Remove your crontab</h3>
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$ </span><span class="command">crontab -r
</span></pre>
</div>
</div><h2><span id="Date.2FTime_fields">Explanation of the Date/Time fields</span></h2><div class="solvvy-solution">
<p>The first five fields of the line are the date and time field which specify how frequently and when to execute a command. When adding the cron job in the DreamHost panel, the Date/Time is added for you automatically based on your 'When to run' setting.</p>
<table border="1" cellpadding="4" cellspacing="0">
<tbody>
<tr>
<th>Field no.</th>
<th>Description</th>
<th>Permitted values</th>
</tr>
<tr>
<td>1</td>
<td>minute</td>
<td>0-59</td>
</tr>
<tr>
<td>2</td>
<td>hour</td>
<td>0-23</td>
</tr>
<tr>
<td>3</td>
<td>day of the month</td>
<td>1-31</td>
</tr>
<tr>
<td>4</td>
<td>month</td>
<td>1-12</td>
</tr>
<tr>
<td>5</td>
<td>day of the week</td>
<td>0-7</td>
</tr>
</tbody>
</table>
<p>Note: For day of the week, both 0 and 7 are considered Sunday. The time is based on that of the server running cron.</p>
<p>Another (graphical) way of looking at these fields.</p>
<div class="preboxcontainer">
<pre class="prebox"> # * * * * *  command to execute
 # │ │ │ │ │
 # │ │ │ │ │
 # │ │ │ │ └───── day of week (0 - 6) (0 to 6 are Sunday to Saturday, or use names; 7 is Sunday, the same as 0)
 # │ │ │ └────────── month (1 - 12)
 # │ │ └─────────────── day of month (1 - 31)
 # │ └──────────────────── hour (0 - 23)
 # └───────────────────────── min (0 - 59)
</pre>
</div>
<p>There are several ways of specifying multiple values in these fields:</p>
<ul>
<li>The comma (',') operator specifies a list of values.
<ul>
<li>1,3,4,7,8</li>
</ul>
</li>
<li>The dash ('-') operator specifies a range of values.
<ul>
<li>1-6</li>
<li>This is equivalent to "1,2,3,4,5,6".</li>
</ul>
</li>
<li>The asterisk ('*') operator (frequently known as a wildcard) specifies all possible values for a field. For example, an asterisk in the hour (second) field would be equivalent to 'every hour'.</li>
<li>The slash ('/') operator can be used in conjunction with an asterisk to skip a given number of values. Example:
<ul>
<li>/3</li>
<li>This means to skip to every third value. So "*/3" in the hour field is equivalent to "0,3,6,9,12,15,18,21"; "*" specifies 'every hour' but the "/3" means that only the first, fourth, seventh, etc. values given by "*" are used.</li>
</ul>
</li>
</ul>
<p>You can also use one of these special strings in place of the time/date fields.</p>
<table class="wikitable" style="width: 786.233px;">
<tbody>
<tr>
<th style="width: 93px;">Entry</th>
<th style="width: 201px;">Description</th>
<th style="width: 83px;">Equivalent to</th>
<th style="width: 396.233px;">Example</th>
</tr>
<tr>
<td style="width: 93px;"><code>@yearly (or @annually)</code></td>
<td style="width: 201px;">Run once a year at midnight on January 1</td>
<td style="width: 83px;"><code>0 0 1 1 *</code></td>
<td style="width: 396.233px;">@yearly php /home/example_username/mail.php</td>
</tr>
<tr>
<td style="width: 93px;"><code>@monthly</code></td>
<td style="width: 201px;">Run once a month at midnight on the first day of the month</td>
<td style="width: 83px;"><code>0 0 1 * * </code></td>
<td style="width: 396.233px;">@monthly php /home/example_username/mail.php</td>
</tr>
<tr>
<td style="width: 93px;"><code>@weekly</code></td>
<td style="width: 201px;">Run once a week at midnight on Sunday morning</td>
<td style="width: 83px;"><code>0 0 * * 0 </code></td>
<td style="width: 396.233px;">@weekly php /home/example_username/mail.php</td>
</tr>
<tr>
<td style="width: 93px;"><code>@daily (or @midnight)</code></td>
<td style="width: 201px;">Run once a day at midnight</td>
<td style="width: 83px;"><code>0 0 * * *</code></td>
<td style="width: 396.233px;">@daily php /home/example_username/mail.php</td>
</tr>
<tr>
<td style="width: 93px;"><code>@hourly</code></td>
<td style="width: 201px;">Run once an hour at the beginning of the hour</td>
<td style="width: 83px;"><code>0 * * * *</code></td>
<td style="width: 396.233px;">@hourly php /home/example_username/mail.php</td>
</tr>
<tr>
<td style="width: 93px;"><code>@reboot</code></td>
<td style="width: 201px;">Run at startup (of the cron daemon)</td>
<td style="width: 83px;"><code>@reboot</code></td>
<td style="width: 396.233px;">@reboot php /home/example_username/mail.php</td>
</tr>
</tbody>
</table>
<p>Review the following Wikipedia article for further information:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Cron#Nonstandard_predefined_scheduling_definitions">Cron – Nonstandard predefined scheduling definitions</a></li>
</ul>
</div><h2><span id="Output">Output</span></h2><div class="solvvy-solution">
<p>The output of the cron job is determined by what is sent to the terminal as a result of the commands/script that are executed. By default, all output is emailed to the location specified in the <a href="/hc/en-us/articles/215767107-Execution-environment-of-a-cron-job">MAILTO</a> variable (see the MAILTO variable requirement section for more information). As noted above, if your cron job command doesn't create any output on the command line then no email is sent.</p>
<p>You can provide special instructions for the standard out (STDOUT) and standard error (STDERR) output by using the "&gt;" operator. When you use "&gt;" without a number before it, it defaults to "1&gt;". This is the standard (non-error) output.</p>
<p>When you use "2&gt;" you are specifying what to do with the error output. So, for example, "&gt;my_file.txt" would redirect standard output to a file called "my_file.txt", and "2&gt;my_errors.txt" would redirect the errors to a file called "my_errors.txt".</p>
</div><h2><span id="Permissions">Permissions</span></h2><div class="solvvy-solution">
<p>By default, files created on DreamHost's servers have a permissions level of 644. If you choose to execute a script via cron, you may need to set the permissions for the file to 744 using <a href="http://linux.die.net/man/1/chmod">chmod</a> in order to allow it to execute properly.</p>
</div><h2><span id="Examples">Examples of custom cron scripts</span></h2><div class="solvvy-solution">
<p>The following examples show what you could add to to a new file in order to create a cron job.</p>
<p><strong>Example 1</strong>: This runs a command at 4:10 PM PST/PDT, and emails you the regular and error output to the destination specified by MAILTO.</p>
<div class="preboxcontainer">
<pre class="prebox">10 16 * * * perl /home/username/bin/yourscript.pl
</pre>
</div>
<p><strong>Example 2</strong>: This runs a command at 2:00 AM PST/PDT on Saturday, and the only output is errors.</p>
<div class="preboxcontainer">
<pre class="prebox">0 2 * * 6 sh /home/username/weekly/weekly-pruning.sh &gt; /dev/null
</pre>
</div>
<p><strong>Example 3</strong>: This runs at midnight on New Years Day (January 1st), and there is no output.</p>
<div class="preboxcontainer">
<pre class="prebox">0 0 1 1 0 python /home/username/happy.new.years.py &gt;/dev/null 2&gt;&amp;1
</pre>
</div>
<p>2&gt;&amp;1 is a special redirect that sends the standard error (“2&gt;”) output to the same place as the standard out (“&gt;” or “1&gt;”) output.</p>
<p><strong>Example 4</strong>: This runs a PHP script called cron.php at the top of every hour.</p>
<div class="preboxcontainer">
<pre class="prebox">0 * * * * php /home/username/cron.php
</pre>
</div>
<p><strong>Example 5</strong>: This runs a local script (i.e. hosted at DreamHost) every 15 minutes.</p>
<div class="preboxcontainer">
<pre class="prebox">*15 * * * * /usr/local/php71/bin/php /home/example_username/myscript.php
</pre>
</div>
<p><strong>Example 6</strong>: This runs an external script (i.e. hosted elsewhere) every 30 minutes using curl.</p>
<div class="preboxcontainer">
<pre class="prebox">*30 * * * * /usr/bin/curl -s http://example.com/send.php &amp;&gt; /dev/null
</pre>
</div>
<p>&amp;&gt;/dev/null is an abbreviation for 1&gt; /dev/null 2&gt; &amp;1. It redirects both file descriptor 2 (STDERR) and descriptor 1 (STDOUT) to /dev/null.</p>
<p>View <a href="http://unix.stackexchange.com/a/70971">http://unix.stackexchange.com/a/70971</a> for more information.</p>
<p><strong>Example 7</strong>: This runs a local script (i.e. hosted at DreamHost) every 10 minutes.</p>
<div class="preboxcontainer">
<pre class="prebox">*/10 * * * * /usr/local/php71/bin/php /home/example_username/myscript.php
</pre>
</div>
<p><strong>Example 8</strong>: This uses wget to download a file to a directory named /cronfolder.</p>
<div class="preboxcontainer">
<pre class="prebox">*/10 * * * */usr/bin/wget -P /home/username/cronfolder/ https://example.com/index.html
</pre>
</div>
</div><h2>Dedicated server editing</h2><div class="solvvy-solution">
<p>If you are logged in as a <a href="https://help.dreamhost.com/hc/en-us/articles/215945467-How-do-I-add-users-to-a-Dedicated-server-">Dedicated server admin user</a>, you can edit the crontab file directly. It is stored here:</p>
<div class="preboxcontainer">
<pre class="prebox">/var/spool/cron/crontabs/youruser
</pre>
</div>
<p>You’ll need to use <code>sudo</code> on your Dedicated server (or start an interactive session as the root user with <code>sudo -i</code>) to access that file. </p>
<div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en">
<div class="alert alert-important">
<div class="alert-icon"><img alt="" height="60" src="https://objects-us-east-1.dream.io/kbimages/images/dh-kb-important-icon.svg" width="60"/></div>
<div class="alert-content">
<p>If you require sudo/admin access, you must upgrade to a Dedicated server.</p>
</div>
</div>
<p>Example (opening the file with the 'vi' text editor):</p>
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$ </span><span class="command">sudo vi /var/spool/cron/crontabs/youruser</span>
</pre>
</div>
</div>
</div><h2>See also</h2><div class="solvvy-hidden">
<ul>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/216041267-SSH-overview">SSH overview</a></li>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/215088608-Crontab-overview">Crontab overview </a></li>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/215767107-Execution-environment-of-a-cron-job">Execution environment of a cron job </a></li>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/215088668-How-do-I-create-a-cron-job-">How do I create a cron job?</a></li>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/214202238-Command-line-PHP-overview">Command line PHP overview</a></li>
</ul>
</div></div>
