<div id="auto-toc"> </div>
<h2>Overview</h2>
<div class="solvvy-solution">
<dl>
<dd><img alt="Mediawiki.fw.png" height="149" src="https://kbimages.dreamhosters.com/images/Mediawiki.fw.png" width="149"/></dd>
</dl>
<p>MediaWiki is free, open-source software you can use to create wiki content, such as <a href="https://www.wikipedia.org/" rel="nofollow">Wikipedia</a>. The application is ideal for creating knowledge base pages similar to an encyclopedia.</p>
<p>For more information, visit MediaWiki's official site:</p>
<ul>
<li><a href="https://www.MediaWiki.org/wiki/MediaWiki" rel="nofollow">MediaWiki.org</a>.</li>
</ul>
<p>MediaWiki can be manually installed on DreamHost servers.</p>
</div>
<h2>Before you install MediaWiki</h2>
<p>Use these instructions to prepare your website for the MediaWiki installation:</p>
<div class="solvvy-solution">
<ol>
<li>Download MediaWiki from its website at:
<ul>
<li><a href="https://www.mediawiki.org/wiki/Download" rel="nofollow" target="_self">MediaWiki</a></li>
</ul>
</li>
<li>Create a database that will be used by MediaWiki. View the following article for further information:
<ul>
<li><a href="/hc/en-us/articles/221691727-Creating-a-MySQL-database">Creating a database</a></li>
</ul>
</li>
<li>Set your domain to use PHP 7.4 or higher. View the following article for further information:
<ul>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/214895317-Change-the-PHP-version-of-a-site">Change the PHP version of a site</a></li>
</ul>
</li>
</ol>
</div>
<h2>Installing MediaWiki</h2>
<div class="solvvy-solution">
<p>You can find detailed instructions on manually installing MediaWiki in the following article:</p>
<ul>
<li><a href="https://www.MediaWiki.org/wiki/Manual:Installation_guide#Summarized_installation_guide">MediaWiki Manual Installation Guide</a></li>
</ul>
<ol>
<li>Upload the MediaWiki file that you downloaded to your web server via <a href="https://help.dreamhost.com/hc/en-us/articles/115000675027-FTP-overview-and-credentials">FTP</a>.</li>
<li>Log into your server via <a href="/hc/en-us/articles/216041267-SSH-overview">SSH</a>, then <a href="https://help.dreamhost.com/hc/en-us/articles/115002768331-UNIX-commands-Decompressing-files">decompress the file on the server</a>.</li>
<li>Confirm that the MediaWiki files are in your domain’s web directory. You may need to copy them from a newly-created <span class="text-object">mediawiki-x.xx.x</span> directory to the root directory.</li>
<li>Point your browser to <span class="text-object">mw-config/index.php</span> in your extracted MediaWiki files, which opens the setup screen. For example:
<ul>
<li><strong>http://example.com/mw-config/index.php</strong></li>
</ul>
</li>
<li>Follow the on-screen instructions to complete the process.<br/><em>Once the installation process completes, a <span class="text-object">LocalSettings.php</span> file is downloaded in your browser.</em></li>
<li>Upload the <span class="text-object">LocalSettings.php</span> file to your MediaWiki install folder on the webserver via FTP.</li>
</ol>
<div class="notebox-note">
<p>The <span class="text-object">LocalSettings.php</span> file contains the configuration settings for your new MediaWiki installation, such as database credentials and user permissions.</p>
</div>
</div>
<h2>Common add-ons to MediaWiki</h2>
<div class="solvvy-solution">
<h3>Extensions</h3>
<p>MediaWiki offers many different types of extensions that you can use to add further functionality and customization to your site. See the following article for further details:</p>
<ul>
<li><a href="https://www.MediaWiki.org/wiki/Category:Extensions" rel="nofollow">MediaWiki Extensions</a></li>
</ul>
<h3>Google Analytics</h3>
<p>You can also add Google Analytics to your MediaWiki installation if you wish. See the following article for detailed instructions:</p>
<ul>
<li><a href="https://www.mediawiki.org/wiki/Extension:Google_Analytics_Integration" rel="nofollow">Google Analytics integration</a></li>
</ul>
</div>
<h2>Handling images</h2>
<div class="solvvy-solution">
<h3>Thumbnail problems</h3>
<p>MediaWiki can occasionally have problems generating image thumbnails, such as returning corrupted images or the error message "Error creating thumbnail". A common cause of this is not enough memory.</p>
<p>If you upload a large image and see "Error creating thumbnail" where a thumbnail should be, try adding the following to your <span class="text-object">LocalSettings.php</span> file in your site’s primary directory:</p>
<div class="preboxcontainer">
<pre class="prebox">$wgMaxShellMemory = 524288;
</pre>
</div>
<h3>SVG images</h3>
<p>For best results in generating thumbnails of SVG images, you may wish to install <a href="https://en.wikipedia.org/wiki/Librsvg">librsvg</a>.</p>
<div class="notebox-note">
<p>The SVG installation process is not supported and is recommended only for advanced users. See the following article for more information:</p>
<ul>
<li><a href="https://www.mediawiki.org/wiki/Manual:Image_administration#SVG" rel="nofollow">MediaWiki Manual:Image administration – SVG</a></li>
</ul>
</div>
</div>
<h2>Email and spam</h2>
<div class="solvvy-solution">
<h3>Domain spoofing</h3>
<p>Add the following to your <span class="text-object">LocalSettings.php</span> file:</p>
<div class="preboxcontainer">
<pre class="prebox">$wgUserEmailUseReplyTo = true;
</pre>
</div>
<p>This spoofs the domain so that the sending user's email is in a Reply-To header instead of the From header. Otherwise, the email that users try to send each other through Special:EmailUser on your wiki cannot be delivered.</p>
<h3>Notifications</h3>
<p>Given the <a href="/hc/en-us/articles/215730467-SMTP-quota-overview">SMTP quota</a>, you need to be careful if you enable <a href="https://www.mediawiki.org/wiki/Manual:$wgEnotifWatchlist" rel="nofollow">$wgEnotifWatchlist</a>.</p>
<p>If a page is 'watchlisted' by 100 users who have that user preference enabled, then a change to that page uses up your quota for an hour, if you are on Shared Hosting.</p>
<h3>Blocking MediaWiki spam</h3>
<dl>
<dt><a href="https://www.mediawiki.org/wiki/Manual:Combating_spam" rel="nofollow">Combating SPAM</a></dt>
</dl>
<dl>
<dd>Provides steps you can take to combat SPAM on your website.</dd>
</dl>
<dl>
<dt><a href="https://meta.wikimedia.org/wiki/Wiki_spam" rel="nofollow">MediaWiki Wiki Spam</a></dt>
</dl>
<dl>
<dd>Description of what wiki spam is, and instructions on how any user can help tackle the wiki-spam problem (not just administrators). Not all of which is obvious, so it's worthwhile for administrators to read through this too, as you might wish to refer your wiki users to this.</dd>
</dl>
<dl>
<dt><a href="https://www.mediawiki.org/wiki/CAPTCHA" rel="nofollow">CAPTCHA</a></dt>
</dl>
<dl>
<dd>Enabling a Captcha on any form helps to reduce spam.</dd>
</dl>
<dl>
<dt><a href="https://www.mediawiki.org/wiki/Manual:Preventing_access#Restrict_account_creation" rel="nofollow">Restrict account creation</a></dt>
</dl>
<dl>
<dd>By default, anyone can create an account on your wiki. However, you can restrict who has the ability to create accounts.</dd>
</dl>
<dl>
<dt><a href="https://www.mediawiki.org/wiki/Manual_talk:User_rights" rel="nofollow">User rights</a></dt>
</dl>
<dl>
<dd>You also have control over user rights. You can <a href="https://www.mediawiki.org/wiki/Manual:$wgGroupPermissions" rel="nofollow">disable non-user edits</a> with this feature.</dd>
</dl>
</div>
<h2>MediaWiki utilities</h2>
<div class="solvvy-solution">
<h3>Maintenance scripts</h3>
<p>In the MediaWiki root install, there is a subdirectory named <span class="text-object">/maintenance</span> which includes various scripts you can run on your MediaWiki installation. In order to run the PHP scripts, you must <a href="https://help.dreamhost.com/hc/en-us/articles/216385837-Creating-a-user-with-Shell-SSH-access">create a Shell (SSH) user</a> on your domain.</p>
<p>In order to run the scripts, you must enter <span class="text-object">php</span> before the filename. For example, run the following command if you wish to run the script <span class="text-object">eval.php</span> in the maintenance directory:</p>
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$ </span><span class="command">php eval.php</span></pre>
</div>
<div class="notebox-note">
<p>If you simply type <span class="code">php</span>, it uses the default version on the server. However, you can explicitly choose any version by using the following instead:</p>
<ul>
<li>/usr/local/php73/bin/php</li>
<li>/usr/local/php74/bin/php</li>
<li>/usr/local/php80/bin/php (Shared and <a href="https://help.dreamhost.com/hc/en-us/articles/360048828271" target="_self">Debian Buster</a> servers only)</li>
</ul>
</div>
<p>To learn more about the individual scripts, see the following article:</p>
<ul>
<li><a href="https://www.MediaWiki.org/wiki/Manual:Maintenance_scripts" rel="nofollow">Maintenance scripts</a></li>
</ul>
<h3>Caching</h3>
<p>Caching your site can improve performance. There are several ways to cache your data using MediaWiki. See the following articles for further information:</p>
<ul>
<li><a href="https://www.mediawiki.org/wiki/Manual:Cache" rel="nofollow">MediaWiki Cache</a></li>
<li><a href="https://www.mediawiki.org/wiki/Manual:File_cache" rel="nofollow">File cache</a></li>
</ul>
<h3>Enabling uploads</h3>
<p>See the following guide for instructions on how to enable file uploads:</p>
<ul>
<li><a href="https://www.mediawiki.org/wiki/Manual:Configuring_file_uploads" rel="nofollow">Configuring file uploads</a></li>
</ul>
<h3>Backing up</h3>
<p>See the following guide for instructions on how to back up your data:</p>
<ul>
<li><a href="https://www.mediawiki.org/wiki/Manual:Backing_up_a_wiki" rel="nofollow">Backing up MediaWiki</a></li>
</ul>
<p>Also, see the following DreamHost article for further instructions:</p>
<ul>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/215089918-Back-up-an-account-in-the-panel">Backup</a></li>
</ul>
</div>
<h2>Secure settings</h2>
<div class="solvvy-solution">
<h3>Passwords and HTTPS</h3>
<p>MediaWiki uses a form on an <span class="text-object">HTTP</span> web page to take your password. This means that your password transmits over the network in clear text. To use <span class="text-object">HTTPS</span>, you must add an <a href="https://help.dreamhost.com/hc/en-us/articles/216041537-SSL-certificates-overview">SSL certificate</a>.</p>
<h3>LocalSettings.php permissions</h3>
<p>The <span class="text-object">LocalSettings.php</span> file stores your database login information in it, including the database username and password. After you move the <span class="text-object">LocalSettings.php</span> file to your root directory, you can review its permissions.</p>
<p>You should update the permissions on that file to 640 or 600. This can be done by running the following command:</p>
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$ </span><span class="command">chmod 640 LocalSettings.php</span>
</pre>
</div>
<p>This makes the file only writeable for the owner while the group can still read it. However, the most secure option is to mark the file as only readable/writable by the owner:</p>
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$ </span><span class="command">chmod 600 LocalSettings.php</span>
</pre>
</div>
<p>This way, your MySQL password on this file is safe from viewing from other users on the same server. See the following article for further details on permissions:</p>
<ul>
<li><a href="/hc/en-us/articles/214750848-UNIX-commands-Working-with-files">Unix File Permissions</a></li>
</ul>
<h3>Moving database credentials to another file</h3>
<p>Another good security practice is to set up a separate PHP file stored in your <a href="https://help.dreamhost.com/hc/en-us/articles/360001219231-Where-is-the-home-directory-#the-users-home-directory" target="_self">user's directory</a>. This file stores your credentials and instead passes them as variables. The following setup describes how to link your <span class="text-object">LocalSettings.php</span> file to this new file:</p>
<ol>
<li>In your user's directory (not the domain's directory), create a new directory called "external_includes".</li>
<li>In this new folder, create a file called <span class="text-object">database_info.php</span>.
<dl>
<dd>The full path to this new file is:</dd>
</dl>
<div class="preboxcontainer">
<pre class="prebox">/home/<span class="code-highlight">username</span>/external_includes/database_info.php</pre>
</div>
<dl>
<dd>Make sure to change <span class="code">username</span> to your <a href="https://help.dreamhost.com/hc/en-us/articles/216385837-Creating-a-user-with-Shell-SSH-access" target="_self">Shell user</a>. The file includes the following (<a href="/hc/en-us/articles/221610868-Finding-your-database-login-credentials">fill in your true values within the quotes</a>):</dd>
</dl>
<div class="preboxcontainer">
<pre class="prebox">&lt;?php
 $database_server = "mysql.example.com"; 
 $database_name   = "databasename"; 
 $database_user   = "username";
 $database_pw     = "password";
 ?&gt;
</pre>
</div>
</li>
<li>Remove the current database credentials in your <span class="text-object">LocalSettings.php</span> file.</li>
<li>Replace those lines with the following:
<div class="preboxcontainer">
<pre class="prebox"># enhanced DB security
 require_once ("/home/username/external_includes/database_info.php");
 
 $wgDBserver     = $database_server;
 $wgDBname       = $database_name;
 $wgDBuser       = $database_user;
 $wgDBpassword   = $database_pw;
 
 # DB variables not security related - leave these alone from how when you set up your wiki
 $wgDBprefix     = "wiki_";
 $wgDBtype       = "mysql";
</pre>
</div>
</li>
</ol>
<p>With this setup, your credentials in the <span class="text-object">LocalSettings</span> file are now safely hidden.</p>
</div>
<h2>Licensing settings</h2>
<div class="solvvy-solution">
<p>You can select which MediaWiki license you wish to use. See the following article for more details:</p>
<ul>
<li><a href="https://wiki.creativecommons.org/wiki/GFDL_versus_CC-by-sa" rel="nofollow">GFDL versus CC</a></li>
</ul>
<div class="notebox-note">
<p>Wikipedia uses GFDL. If you wish to enable reusable content in Wikipedia and other GFDL projects, then you must use GFDL (or multi-license to use both). In general, if there are other projects you want to work with, you should use compatible licensing.</p>
</div>
</div>
<h2>Upgrading MediaWiki</h2>
<div class="solvvy-solution">
<p>Always make sure to first backup your database and website files before making any adjustments. This way, if something were to error you could quickly replace your files. View the following article for details:</p>
<ul>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/215089918-Back-up-an-account-in-the-panel">Back up an account in the panel </a></li>
</ul>
<p>View the following guide at mediawiki.org for upgrade instructions:</p>
<ul>
<li><a href="https://www.mediawiki.org/wiki/Manual:Upgrading" rel="nofollow">Upgrading</a></li>
</ul>
<div class="notebox-note">
<p>It may be necessary to run the <span class="text-object">/maintenance/update.php</span> script after upgrading. To do so, log into your site via <a href="/hc/en-us/articles/216041267-SSH-overview">SSH</a>. Then run the following command:</p>
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$ </span><span class="command">php /maintenance/update.php</span></pre>
</div>
<p>This runs an update script that should fix any current errors on your site. If that doesn't work, specify the full path to a version of PHP. For example:</p>
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$ </span><span class="command">/usr/local/php74/bin/php maintenance/update.php</span></pre>
</div>
</div>
<h2>Advanced settings and troubleshooting</h2>
<div class="solvvy-solution">
<h3>Enable debugging</h3>
<p>You can enable debugging by adding lines at the bottom of your <a href="https://www.mediawiki.org/wiki/Manual:LocalSettings.php" rel="nofollow">LocalSettings.php file</a>. By enabling this, you are provided detailed debugging information to help isolate the cause.</p>
<p>See the following article for further details:</p>
<ul>
<li><a href="https://www.mediawiki.org/wiki/Manual:How_to_debug" rel="nofollow">How to debug</a></li>
</ul>
<p>After you finish troubleshooting your install, you should disable your debugging settings.</p>
<h3>Short URLs</h3>
<p>You can shorten the URLs to appear more user friendly. For example, you can change the following URL example:</p>
<dl>
<dd><strong>example.com/w/index.php?title=Main_Page</strong>
<p>to</p>
<strong>example.com/wiki/Main_Page</strong></dd>
</dl>
<p>See the following articles for further instructions:</p>
<ul>
<li><a href="https://www.mediawiki.org/wiki/Manual:Short_URL" rel="nofollow">Short URLs</a></li>
<li><a href="https://shorturls.redwerks.org/" rel="nofollow">MediaWiki ShortURL Builder</a></li>
</ul>
<h3>Fixing MediaWiki after adding an SSL certificate to a domain</h3>
<p>You may notice that MediaWiki loads incorrectly or shows 'insecure content' warnings in the browser bar after you add an <a href="/hc/en-us/articles/215089118-Adding-an-SSL-certificate-overview">SSL certificate</a> to the domain where MediaWiki is installed.</p>
<p>Your <span class="text-object">LocalSettings.php</span> file must be edited to reflect <span class="text-object">HTTPS</span> for your domain. To fix, find the <span class="text-object">$wgServer</span> value in the <span class="text-object">LocalSettings.php</span> file and make sure the domain shows <span class="text-object">HTTPS</span> (and not <span class="text-object">HTTP</span>) for the URL value:</p>
<div class="preboxcontainer">
<pre class="prebox">## The protocol and server name to use in fully-qualified URLs
$wgServer = "<span class="code-highlight">https</span>://www.example.com";</pre>
</div>
<p>After you make this edit, save it, and then transfer the <span class="text-object">LocalSettings.php</span> file to the root wiki folder on your server. Refresh your browser and MediaWiki should load normally.</p>
</div>
<h2>See also</h2>
<div class="solvvy-hidden">
<h3>Internal links</h3>
<ul>
<li><a href="https://help.dreamhost.com/hc/en-us/sections/203242327-Third-Party-Applications">Third-Party Applications</a></li>
</ul>
<h3>External links</h3>
<ul>
<li><a href="https://www.mediawiki.org/wiki/MediaWiki" rel="nofollow">MediaWiki's official website</a></li>
<li><a href="https://meta.wikimedia.org/wiki/Help:Editing" rel="nofollow">MetaWikipedia Help:Editing</a> – MediaWiki markup reference</li>
<li><a href="https://www.MediaWiki.org/wiki/Category:Extensions" rel="nofollow">MediaWiki Extensions</a></li>
<li><a href="https://www.MediaWiki.org/wiki/Manual:Maintenance_scripts" rel="nofollow">Maintenance scripts</a></li>
<li><a href="https://www.mediawiki.org/wiki/Manual:Combating_spam" rel="nofollow">Combating SPAM</a></li>
<li><a href="https://www.mediawiki.org/wiki/Manual:Cache" rel="nofollow">MediaWiki Cache</a></li>
<li><a href="https://www.mediawiki.org/wiki/Manual:LocalSettings.php" rel="nofollow">LocalSettings.php file</a></li>
<li><a href="https://www.mediawiki.org/wiki/Manual:How_to_debug" rel="nofollow">How to debug</a></li>
</ul>
</div>
</div>
