<h2>Overview</h2>
<div class="solvvy-solution">
<p>This article explains how to create a call to access the DreamHost API.&nbsp;You can use DreamHost's API in two ways:</p>
<ul>
<li>Visiting a URL in your browser</li>
<li>Writing a script</li>
</ul>
</div>
<h2 class="header-section">Connecting to the API</h2>
<div class="solvvy-solution">
<p><span style="font-size: 15px;">An API call is constructed of several values. The following steps walk you through creating an API call using these values.</span></p>
<h2>Step 1 — The base URL</h2>
<p>The base URL is the same for all API calls. It is:</p>
<div class="preboxcontainer">
<pre class="prebox"><span class="code-highlight">https://api.dreamhost.com</span></pre>
</div>
<p>Everything you add after this URL creates your own unique API call.</p>
<h2>Step 2 — Generate an API key</h2>
<p>You must first create an API Key. This is a unique key associated with your account and the information you wish to make available to any API call.</p>
<ol>
<li>Visit the <a class="panel-link" href="https://panel.dreamhost.com/?tree=home.api" target="_blank" rel="noopener">API page</a> in your panel.</li>
<li>This page lists all API functions available. Only the functions you check will be available to you when using the key. If you wish to have all services available, check <span class="text-object">All functions!</span> at the top.</li>
<li>Click <strong>Generate a new API Key now!</strong> at the bottom to create your key.</li>
</ol>
<p>Your new key is displayed. You can now use this key to connect with the DreamHost API.</p>
<div class="notebox-important">
<p>In order for a subaccount to create an API Key, it must be granted <a href="https://help.dreamhost.com/hc/en-us/articles/215413677-Account-privileges-overview">Billing Account Privileges</a>.</p>
<p>Please note that if a subaccount creates an API Key, it will only be visible to the subaccount on the&nbsp;<a class="panel-link" href="https://panel.dreamhost.com/?tree=home.api" target="_blank" rel="noopener">API Key</a> page in the panel.&nbsp;The primary account owner will not be able to view the subaccount's API Key in their panel.</p>
</div>
<p>After the base URL, add <span class="code">?key=</span> followed by the key. Assuming your API Key is <span class="text-object">1A2B3C4D5E6F7G8H</span>, the first part of your API call will look like this:</p>
<div class="preboxcontainer">
<pre class="prebox">https://api.dreamhost.com/<span class="code-highlight">?key=1A2B3C4D5E6F7G8H</span></pre>
</div>
<h2>Step 3 — Add the Command</h2>
<p>The API Key is followed by the specific API command you'd like to run. When you created your key, you chose which command(s) it may access.&nbsp;You can find the different commands on the various API pages.</p>
<ul>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/217077988-Account-API-commands">Account API commands</a></li>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/217077998-Announcement-List-API-commands">Announcement List API commands</a></li>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/217555677-API-metacommands">API metacommands</a></li>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/217555707-DNS-API-commands">DNS API commands</a></li>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/217555767-Domain-API-commands">Domain API commands</a></li>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/217078088-Jabber-API-commands">Jabber API commands</a></li>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/217555827-Mail-API-commands">Mail API commands</a></li>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/217078108-MySQL-API-commands">MySQL API commands</a></li>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/217078078-Private-server-API-commands">Private server API commands</a></li>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/217560077-Rewards-API-commands">Rewards API commands</a></li>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/217560157-Service-control-API-commands">Service control API commands</a></li>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/217078398-User-API-commands">User API commands</a></li>
</ul>
<div class="notebox-note">
<p>In this example, the command to <a href="https://help.dreamhost.com/hc/en-us/articles/217555707-DNS-API-commands" target="_self">list all DNS records on an account</a> is used.</p>
<p>This command is <span class="code">dns-list_records</span>.</p>
</div>
<p>After the API Key, add <span class="code">&amp;cmd=</span> followed by the command.&nbsp;</p>
<div class="preboxcontainer">
<pre class="prebox">https://api.dreamhost.com/?key=1A2B3C4D5E6F7G8H<span class="code-highlight">&amp;cmd=dns-list_records</span></pre>
</div>
<p>This simple command is all you need to interact with the API. If you visit the URL above in a browser, you'll see a response.</p>
<p>There are additional commands you can add to manage and format the response.</p>
<h2>Step 4 — Add values</h2>
<div class="notebox-important">
<p>Not all API calls require specific values. View the <a href="https://help.dreamhost.com/hc/en-us/sections/203903178-API-Application-Programming-Interface-" target="_blank" rel="noopener">API page</a> for the command you're running to confirm which fields are necessary.</p>
</div>
<p>Some API calls require you to specify a value. For example, if you want to add a DNS record to a domain using <span class="code"><a href="https://help.dreamhost.com/hc/en-us/articles/217555707-DNS-API-commands#dns-add_record" target="_blank" rel="noopener">dns-add_record</a></span>, you must specify the following values:</p>
<ul>
<li><strong>record</strong>: <span class="code">&amp;record=</span> followed by the domain name</li>
<li><strong>type</strong>: <span class="code">&amp;type=</span> followed by the type of DNS record</li>
<li><strong>value</strong>: <span class="code">&amp;value=</span> followed by the DNS value to add</li>
</ul>
<p>The following example would add a TXT record with the value of <span class="code">test123</span> to <strong>example.com</strong>.</p>
<div class="preboxcontainer">
<pre class="prebox">https://api.dreamhost.com/?key=1A2B3C4D5E6F7G8H<span class="code-highlight">&amp;cmd=dns-add_record&amp;record=example.com&amp;type=TXT&amp;value=test123</span></pre>
</div>
<h2>Step 5 — Choose a format (optional)</h2>
<p>When you make a call to the API, the response is returned in a specific format. You can choose which type of format you want the data to be returned in by adding <span class="code">&amp;format=</span> followed by the format. Valid formats are:</p>
<ul>
<li><a href="https://api.dreamhost.com/?key=6SHU5P2HLDAYECUM&amp;cmd=user-list_users_no_pw&amp;format=tab">tab</a> (default)</li>
<li><a href="https://api.dreamhost.com/?key=6SHU5P2HLDAYECUM&amp;cmd=user-list_users_no_pw&amp;format=xml">xml</a></li>
<li><a href="https://api.dreamhost.com/?key=6SHU5P2HLDAYECUM&amp;cmd=user-list_users_no_pw&amp;format=json">json</a></li>
<li><a href="https://api.dreamhost.com/?key=6SHU5P2HLDAYECUM&amp;cmd=user-list_users_no_pw&amp;format=perl">perl</a></li>
<li><a href="https://api.dreamhost.com/?key=6SHU5P2HLDAYECUM&amp;cmd=user-list_users_no_pw&amp;format=php">php</a></li>
<li><a href="https://api.dreamhost.com/?key=6SHU5P2HLDAYECUM&amp;cmd=user-list_users_no_pw&amp;format=yaml">yaml</a></li>
<li><a href="https://api.dreamhost.com/?key=6SHU5P2HLDAYECUM&amp;cmd=user-list_users_no_pw&amp;format=html">HTML</a></li>
</ul>
<p>The following returns data in JSON format:</p>
<div class="preboxcontainer">
<pre class="prebox">https://api.dreamhost.com/?key=1A2B3C4D5E6F7G8H&amp;cmd=account-domain_usage<span class="code-highlight">&amp;format=json</span></pre>
</div>
<h2>Step 6 — Add a unique ID to the call (optional)</h2>
<p>You may pass a new unique id value (max length: 64 chars) when you submit a request to ensure you do not accidentally submit the same command twice. This is most useful when creating a script to run the commands.</p>
<p>DreamHost recommends using <a href="https://en.wikipedia.org/wiki/Universally_unique_identifier">UUIDs</a> for this purpose, but any values will work. The unique id you use only applies to your specific API key, so you do not need to worry about other users using the same unique id.</p>
<div class="notebox-note">
<p>Only successful queries "use up" a <span class="code">unique_id</span>.</p>
</div>
<p>To add a unique id, add <span class="code">&amp;unique_id=</span> followed by the id value. For example, the id value of <span class="code">123456</span> is used in the following example:</p>
<div class="preboxcontainer">
<pre class="prebox">https://api.dreamhost.com/?key=1A2B3C4D5E6F7G8H&amp;cmd=dnslist_records&amp;format=json<span class="code-highlight">&amp;unique_id=123456</span></pre>
</div>
<h2>Step 7 — Add your account # (optional)</h2>
<p>You can also add the account number you intend to perform operations under. You can specify this by adding <span class="code">&amp;account=</span> followed by the account number on the <a class="panel-link" href="https://panel.dreamhost.com/?tree=billing.account" target="_blank" rel="noopener">Manage Account</a> page. For example:</p>
<div class="preboxcontainer">
<pre class="prebox">https://api.dreamhost.com/?key=1A2B3C4D5E6F7G8H&amp;cmd=account-domain_usage&amp;format=json<span class="code-highlight">&amp;account=123456</span></pre>
</div>
<div class="notebox-note">
<p>The account automatically defaults to your own, or the first account you have access to.</p>
</div>
</div>
<h2 class="header-section">Connecting using a script</h2>
<div class="solvvy-solution">
<p>The following is a simple Bash script that prints all subscribers to a specific Announcement List.</p>
<ul>
<li>This uses the command <span class="code"><a href="https://help.dreamhost.com/hc/en-us/articles/217077998-Announcement-List-API-commands#announcement_list-list_subscribers" target="_blank" rel="noopener">announcement_list-list_subscribers</a></span>.</li>
<li>The <span class="code">LISTNAME</span> variable is the first part of the <span class="text-object">List Name</span> found on the <a class="panel-link" href="https://panel.dreamhost.com/?tree=mail.list" target="_blank" rel="noopener">Announce Lists</a> page. If the <span class="text-object">List Name</span> was <strong>testlist@example.com</strong>, this variable would be <span class="code">testlist</span>.</li>
<li>The <span class="code">DOMAIN</span> is the URL the list appears on.&nbsp;If the <span class="text-object">List Name</span> was <strong>testlist@example.com</strong> this variable would be <span class="code">example.com</span>.</li>
</ul>
<div class="preboxcontainer">
<pre class="prebox">#!/bin/bash

# variables
KEY=<span class="code-highlight">1A2B3C4D5E6F7G8H</span>
CMD=<span class="code-highlight">announcement_list-list_subscribers</span>
FORMAT=<span class="code-highlight">json</span>
LISTNAME=<span class="code-highlight">testlist</span>
DOMAIN=<span class="code-highlight">example.com</span>

# commands
LINK="https://api.dreamhost.com/?key=$KEY&amp;cmd=$CMD&amp;format=$FORMAT&amp;listname=$LISTNAME&amp;domain=$DOMAIN"
RESPONSE=`wget -O- -q "$LINK"  | python -m json.tool`

# print results
echo "$LINK"
echo "$RESPONSE"

if ! (echo $RESPONSE | grep -q 'success'); then
  exit 1
fi</pre>
</div>
</div>
