<h2>Overview</h2>
<div class="solvvy-solution">
<p><a class="reference external" href="https://aws.amazon.com/cli/">AWS CLI</a> is a command-line tool for uploading, retrieving, and managing data in Amazon S3 and other Cloud Storage Service Providers that use the S3 protocol such as <a href="https://help.dreamhost.com/hc/en-us/articles/214823108-What-is-DreamObjects-">DreamObjects</a>. It's best suited for power users who are competent with the command line and is ideal for scripts that are automated and triggered from cron.</p>
<p>The following instructions help you install and configure AWS CLI to work with DreamObjects.</p>
</div>
<h2><span id="do-i-need-to-install-aws">Do I need to manually install AWS?</span></h2>
<div class="solvvy-solution">
<p>AWS is installed by default on most servers. However, it's possible you may still need to install this manually if your server is running Ubuntu 14.&nbsp;</p>
<h3>Shared servers</h3>
<p>AWS CLI is installed by default on all Shared servers. You can confirm if your site is on a Shared server on the <a class="panel-link" href="https://panel.dreamhost.com/?tree=domain.manage" target="_blank" rel="noopener">Manage Domains</a> page. To the right of your domain it will say 'Shared Hosting'. If so, you can proceed with <a href="#configure" target="_self">configuring AWS</a> below.</p>
<h3>VPS and Dedicated servers</h3>
<p>If you are running an older VPS or Dedicated server, it may be running Ubuntu 14. This link explains how you can confirm if your server is running Ubuntu 14.</p>
<ul>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/360022178852-#version" target="_self">Checking the version of Ubuntu</a></li>
</ul>
<p>If so, proceed with the steps below. If you see your server is already running Ubuntu 18 or Debian, skip to <a href="#configure" target="_self">configuring AWS</a> below.</p>
</div>
<h2>Install Python 2.7.15 or newer</h2>
<div class="solvvy-solution">
<p>Due to a kernel update with Ubuntu, you must install Python 2.7.15 or newer in order to create a virtualenv. View the following articles to install a more recent version of Python:</p>
<ul>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/115000218612-Installing-a-custom-version-of-Python-2">Installing a custom version of Python 2</a></li>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/115000702772-Installing-a-custom-version-of-Python-3">Installing a custom version of Python 3</a></li>
</ul>
</div>
<h2>Installing AWS CLI</h2>
<div class="solvvy-solution">
<h3>Mac and Linux computers</h3>
<p>Mac and Linux machines can install aw-cli<strong>&nbsp;</strong>by running the <a href="https://help.dreamhost.com/hc/en-us/articles/115000221112-Using-pip-to-install-Python-2-modules">Python “pip” command</a>. The following shows how to install aws-cli on a DreamHost server, however steps are the same for Mac and Linux machines.</p>
<h3>DreamHost servers</h3>
<p>To install the client on a DreamHost Shared, VPS, or Dedicated server requires the use of <a href="https://help.dreamhost.com/hc/en-us/articles/215489338-Installing-virtualenv-and-custom-modules-in-Python">Python's virtualenv</a>. Once the virtual environment is created and active, you can then use 'pip' to install the AWS CLI client locally.</p>
<ol>
<li>Log into your server via <a href="https://help.dreamhost.com/hc/en-us/articles/216041267-SSH-overview">SSH</a>.</li>
<li>Install a custom version of Python as mentioned above.
<ul>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/115000218612-Installing-a-custom-version-of-Python-2">Installing a custom version of Python 2</a></li>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/115000702772-Installing-a-custom-version-of-Python-3">Installing a custom version of Python 3</a></li>
</ul>
</li>
<li>Make sure you're in your user's home directory.
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$ </span><span class="command">cd ~</span></pre>
</div>
</li>
<li>Create a virtual environment for a specific DreamObjects bucket. This virtual environment will store your DreamObjects bucket's credentials. This example names the virtual environment after your DreamObjects bucket name. The following command also assumes you've installed a custom version of Python as mentioned above. You can then specify the full path to your local install when creating the virtual environment.
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$ </span><span class="command">virtualenv -p /home/username/opt/python-2.7.15/bin/python my-bucket</span></pre>
</div>
</li>
<li>Activate this new virtual environment.
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[server]$ </span><span class="command">source ~/my-bucket/bin/activate</span></pre>
</div>
</li>
<li>When you activate the virtual environment, the command prompt changes to show it's active. For example:
<div class="preboxcontainer">
<pre class="prebox"><span class="server">(my-bucket) </span></pre>
</div>
</li>
<li>Install aws-cli.
<div class="preboxcontainer">
<pre class="prebox"><span class="server">(my-bucket) </span><span class="command">pip install awscli</span></pre>
</div>
</li>
<li>Finally, update the permissions on the new <span class="text-object">aws</span> directory so you can run aws commands.
<div class="preboxcontainer">
<pre class="prebox"><span class="server">(my-bucket) </span><span class="command">chmod +x ~/my-bucket/bin/aws</span></pre>
</div>
</li>
</ol>
<p>You can now proceed with configuring it to use your DreamObjects bucket.</p>
</div>
<h2><span id="configure">Configuring AWS CLI</span></h2>
<div class="solvvy-solution">
<p>Run the following command to input your <a href="https://help.dreamhost.com/hc/en-us/articles/215986357-DreamObjects-Keys">Access and Secret key</a> for your bucket. aws-cli stores them encrypted for you. Accept the 'Default region' and 'Default output format' by pressing <span class="code">Enter</span>. You do not need to enter anything for those fields.</p>
<div class="preboxcontainer">
<pre class="prebox"><span class="server">[user@localhost]$ </span><span class="command">aws configure</span>
<span class="cmdoutput">AWS Access Key ID [None]:
AWS Secret Access Key [None]:
Default region name [None]:
Default output format [None]:</span>
</pre>
</div>
<p>You can now run aws-cli commands to interact with your DreamObjects bucket.</p>
</div>
<h2>Example Commands</h2>
<div class="solvvy-solution">
<p>View the following articles for examples of commands you can use to manage your DreamObjects data:</p>
<ul>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/360022654971-AWS-CLI-commands-to-manage-your-DreamObjects-data" target="_blank" rel="noopener">AWS CLI commands to manage your DreamObjects data</a></li>
<li><a href="https://help.dreamhost.com/hc/en-us/articles/360022618112-Setting-permissions-using-AWS-CLI" target="_blank" rel="noopener">Setting permissions using AWS CLI</a></li>
</ul>
</div>
<h2>Configuring your user to automatically use the new virtual environment</h2>
<div class="solvvy-solution">
<p>When you follow the commands above, the virtual environment is activated during your session. However, if you log out and log back in, it will no longer be active.</p>
<p>To automatically activate your virtual environment when you log in, add the following to your .bash_profile.</p>
<div class="preboxcontainer">
<pre class="prebox"><span class="command">source ~/my-bucket/bin/activate</span></pre>
</div>
<p>Just change 'my-bucket' to the name of the virtual environment you created.</p>
</div>
<div class="footer">&nbsp;</div>
<!--DreamObjects Button-->
<div class="dream-sign-up">
<h2>Start Storing Your Data Today!</h2>
<div class="solvvy-hidden"><a href="https://www.dreamhost.com/cloud/storage/">Sign Up for DreamObjects</a></div>
</div>
